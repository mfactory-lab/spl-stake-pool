{"version":3,"file":"index.cjs.js","sources":["../src/utils/math.ts","../src/constants.ts","../src/utils/program-address.ts","../node_modules/superstruct/lib/index.es.js","../src/layouts.ts","../src/utils/stake.ts","../src/utils/instruction.ts","../src/utils/index.ts","../src/instructions.ts","../src/index.ts"],"sourcesContent":["import BN from 'bn.js';\nimport { LAMPORTS_PER_SOL } from '@solana/web3.js';\n\nexport function solToLamports(amount: number): number {\n  if (isNaN(amount)) return Number(0);\n  return Number(amount * LAMPORTS_PER_SOL);\n}\n\nexport function lamportsToSol(lamports: number | BN | bigint): number {\n  if (typeof lamports === 'number') {\n    return Math.abs(lamports) / LAMPORTS_PER_SOL;\n  }\n  if (typeof lamports === 'bigint') {\n    return Math.abs(Number(lamports)) / LAMPORTS_PER_SOL;\n  }\n\n  let signMultiplier = 1;\n  if (lamports.isNeg()) {\n    signMultiplier = -1;\n  }\n\n  const absLamports = lamports.abs();\n  const lamportsString = absLamports.toString(10).padStart(10, '0');\n  const splitIndex = lamportsString.length - 9;\n  const solString = lamportsString.slice(0, splitIndex) + '.' + lamportsString.slice(splitIndex);\n  return signMultiplier * parseFloat(solString);\n}\n","import { Buffer } from 'buffer';\nimport { LAMPORTS_PER_SOL, PublicKey } from '@solana/web3.js';\n\n// Public key that identifies the metadata program.\nexport const METADATA_PROGRAM_ID = new PublicKey('metaqbxxUerdq28cj1RbAWkYQm3ybzjb6a8bt518x1s');\nexport const METADATA_MAX_NAME_LENGTH = 32;\nexport const METADATA_MAX_SYMBOL_LENGTH = 10;\nexport const METADATA_MAX_URI_LENGTH = 200;\n\n// Public key that identifies the SPL Stake Pool program.\nexport const STAKE_POOL_PROGRAM_ID = new PublicKey('SPoo1Ku8WFXoNDMHPsrGSTSG1Y47rzgn41SLUNakuHy');\n\n// Maximum number of validators to update during UpdateValidatorListBalance.\nexport const MAX_VALIDATORS_TO_UPDATE = 5;\n\n// Seed for ephemeral stake account\nexport const EPHEMERAL_STAKE_SEED_PREFIX = Buffer.from('ephemeral');\n\n// Seed used to derive transient stake accounts.\nexport const TRANSIENT_STAKE_SEED_PREFIX = Buffer.from('transient');\n\n// Minimum amount of staked SOL required in a validator stake account to allow\n// for merges without a mismatch on credits observed\nexport const MINIMUM_ACTIVE_STAKE = LAMPORTS_PER_SOL;\n","import { PublicKey } from '@solana/web3.js';\nimport BN from 'bn.js';\nimport { Buffer } from 'buffer';\nimport {\n  EPHEMERAL_STAKE_SEED_PREFIX,\n  METADATA_PROGRAM_ID,\n  TRANSIENT_STAKE_SEED_PREFIX,\n} from '../constants';\n\n/**\n * Generates the withdraw authority program address for the stake pool\n */\nexport function findWithdrawAuthorityProgramAddress(\n  programId: PublicKey,\n  stakePoolAddress: PublicKey,\n) {\n  const [publicKey] = PublicKey.findProgramAddressSync(\n    [stakePoolAddress.toBuffer(), Buffer.from('withdraw')],\n    programId,\n  );\n  return publicKey;\n}\n\n/**\n * Generates the stake program address for a validator's vote account\n */\nexport function findStakeProgramAddress(\n  programId: PublicKey,\n  voteAccountAddress: PublicKey,\n  stakePoolAddress: PublicKey,\n) {\n  const [publicKey] = PublicKey.findProgramAddressSync(\n    [voteAccountAddress.toBuffer(), stakePoolAddress.toBuffer()],\n    programId,\n  );\n  return publicKey;\n}\n\n/**\n * Generates the stake program address for a validator's vote account\n */\nexport function findTransientStakeProgramAddress(\n  programId: PublicKey,\n  voteAccountAddress: PublicKey,\n  stakePoolAddress: PublicKey,\n  seed: BN,\n) {\n  const [publicKey] = PublicKey.findProgramAddressSync(\n    [\n      TRANSIENT_STAKE_SEED_PREFIX,\n      voteAccountAddress.toBuffer(),\n      stakePoolAddress.toBuffer(),\n      seed.toBuffer('le', 8),\n    ],\n    programId,\n  );\n  return publicKey;\n}\n\n/**\n * Generates the ephemeral program address for stake pool re-delegation\n */\nexport function findEphemeralStakeProgramAddress(\n  programId: PublicKey,\n  stakePoolAddress: PublicKey,\n  seed: BN,\n) {\n  const [publicKey] = PublicKey.findProgramAddressSync(\n    [EPHEMERAL_STAKE_SEED_PREFIX, stakePoolAddress.toBuffer(), seed.toBuffer('le', 8)],\n    programId,\n  );\n  return publicKey;\n}\n\n/**\n * Generates the token metadata address by {@link mint}\n */\nexport function findTokenMetadataAddress(mint: PublicKey): PublicKey {\n  const [publicKey] = PublicKey.findProgramAddressSync(\n    [Buffer.from('metadata'), METADATA_PROGRAM_ID.toBuffer(), mint.toBuffer()],\n    METADATA_PROGRAM_ID,\n  );\n  return publicKey;\n}\n","/**\n * A `StructFailure` represents a single specific failure in validation.\n */\n\n/**\n * `StructError` objects are thrown (or returned) when validation fails.\n *\n * Validation logic is design to exit early for maximum performance. The error\n * represents the first error encountered during validation. For more detail,\n * the `error.failures` property is a generator function that can be run to\n * continue validation and receive all the failures in the data.\n */\nclass StructError extends TypeError {\n  constructor(failure, failures) {\n    let cached;\n    const {\n      message,\n      ...rest\n    } = failure;\n    const {\n      path\n    } = failure;\n    const msg = path.length === 0 ? message : \"At path: \" + path.join('.') + \" -- \" + message;\n    super(msg);\n    Object.assign(this, rest);\n    this.name = this.constructor.name;\n\n    this.failures = () => {\n      var _cached;\n\n      return (_cached = cached) != null ? _cached : cached = [failure, ...failures()];\n    };\n  }\n\n}\n\n/**\n * Check if a value is an iterator.\n */\nfunction isIterable(x) {\n  return isObject(x) && typeof x[Symbol.iterator] === 'function';\n}\n/**\n * Check if a value is a plain object.\n */\n\n\nfunction isObject(x) {\n  return typeof x === 'object' && x != null;\n}\n/**\n * Check if a value is a plain object.\n */\n\nfunction isPlainObject(x) {\n  if (Object.prototype.toString.call(x) !== '[object Object]') {\n    return false;\n  }\n\n  const prototype = Object.getPrototypeOf(x);\n  return prototype === null || prototype === Object.prototype;\n}\n/**\n * Return a value as a printable string.\n */\n\nfunction print(value) {\n  return typeof value === 'string' ? JSON.stringify(value) : \"\" + value;\n}\n/**\n * Shifts (removes and returns) the first value from the `input` iterator.\n * Like `Array.prototype.shift()` but for an `Iterator`.\n */\n\nfunction shiftIterator(input) {\n  const {\n    done,\n    value\n  } = input.next();\n  return done ? undefined : value;\n}\n/**\n * Convert a single validation result to a failure.\n */\n\nfunction toFailure(result, context, struct, value) {\n  if (result === true) {\n    return;\n  } else if (result === false) {\n    result = {};\n  } else if (typeof result === 'string') {\n    result = {\n      message: result\n    };\n  }\n\n  const {\n    path,\n    branch\n  } = context;\n  const {\n    type\n  } = struct;\n  const {\n    refinement,\n    message = \"Expected a value of type `\" + type + \"`\" + (refinement ? \" with refinement `\" + refinement + \"`\" : '') + \", but received: `\" + print(value) + \"`\"\n  } = result;\n  return {\n    value,\n    type,\n    refinement,\n    key: path[path.length - 1],\n    path,\n    branch,\n    ...result,\n    message\n  };\n}\n/**\n * Convert a validation result to an iterable of failures.\n */\n\nfunction* toFailures(result, context, struct, value) {\n  if (!isIterable(result)) {\n    result = [result];\n  }\n\n  for (const r of result) {\n    const failure = toFailure(r, context, struct, value);\n\n    if (failure) {\n      yield failure;\n    }\n  }\n}\n/**\n * Check a value against a struct, traversing deeply into nested values, and\n * returning an iterator of failures or success.\n */\n\nfunction* run(value, struct, options = {}) {\n  const {\n    path = [],\n    branch = [value],\n    coerce = false,\n    mask = false\n  } = options;\n  const ctx = {\n    path,\n    branch\n  };\n\n  if (coerce) {\n    value = struct.coercer(value, ctx);\n\n    if (mask && struct.type !== 'type' && isObject(struct.schema) && isObject(value) && !Array.isArray(value)) {\n      for (const key in value) {\n        if (struct.schema[key] === undefined) {\n          delete value[key];\n        }\n      }\n    }\n  }\n\n  let valid = true;\n\n  for (const failure of struct.validator(value, ctx)) {\n    valid = false;\n    yield [failure, undefined];\n  }\n\n  for (let [k, v, s] of struct.entries(value, ctx)) {\n    const ts = run(v, s, {\n      path: k === undefined ? path : [...path, k],\n      branch: k === undefined ? branch : [...branch, v],\n      coerce,\n      mask\n    });\n\n    for (const t of ts) {\n      if (t[0]) {\n        valid = false;\n        yield [t[0], undefined];\n      } else if (coerce) {\n        v = t[1];\n\n        if (k === undefined) {\n          value = v;\n        } else if (value instanceof Map) {\n          value.set(k, v);\n        } else if (value instanceof Set) {\n          value.add(v);\n        } else if (isObject(value)) {\n          value[k] = v;\n        }\n      }\n    }\n  }\n\n  if (valid) {\n    for (const failure of struct.refiner(value, ctx)) {\n      valid = false;\n      yield [failure, undefined];\n    }\n  }\n\n  if (valid) {\n    yield [undefined, value];\n  }\n}\n\n/**\n * `Struct` objects encapsulate the validation logic for a specific type of\n * values. Once constructed, you use the `assert`, `is` or `validate` helpers to\n * validate unknown input data against the struct.\n */\n\nclass Struct {\n  constructor(props) {\n    const {\n      type,\n      schema,\n      validator,\n      refiner,\n      coercer = value => value,\n      entries = function* () {}\n    } = props;\n    this.type = type;\n    this.schema = schema;\n    this.entries = entries;\n    this.coercer = coercer;\n\n    if (validator) {\n      this.validator = (value, context) => {\n        const result = validator(value, context);\n        return toFailures(result, context, this, value);\n      };\n    } else {\n      this.validator = () => [];\n    }\n\n    if (refiner) {\n      this.refiner = (value, context) => {\n        const result = refiner(value, context);\n        return toFailures(result, context, this, value);\n      };\n    } else {\n      this.refiner = () => [];\n    }\n  }\n  /**\n   * Assert that a value passes the struct's validation, throwing if it doesn't.\n   */\n\n\n  assert(value) {\n    return assert(value, this);\n  }\n  /**\n   * Create a value with the struct's coercion logic, then validate it.\n   */\n\n\n  create(value) {\n    return create(value, this);\n  }\n  /**\n   * Check if a value passes the struct's validation.\n   */\n\n\n  is(value) {\n    return is(value, this);\n  }\n  /**\n   * Mask a value, coercing and validating it, but returning only the subset of\n   * properties defined by the struct's schema.\n   */\n\n\n  mask(value) {\n    return mask(value, this);\n  }\n  /**\n   * Validate a value with the struct's validation logic, returning a tuple\n   * representing the result.\n   *\n   * You may optionally pass `true` for the `withCoercion` argument to coerce\n   * the value before attempting to validate it. If you do, the result will\n   * contain the coerced result when successful.\n   */\n\n\n  validate(value, options = {}) {\n    return validate(value, this, options);\n  }\n\n}\n/**\n * Assert that a value passes a struct, throwing if it doesn't.\n */\n\nfunction assert(value, struct) {\n  const result = validate(value, struct);\n\n  if (result[0]) {\n    throw result[0];\n  }\n}\n/**\n * Create a value with the coercion logic of struct and validate it.\n */\n\nfunction create(value, struct) {\n  const result = validate(value, struct, {\n    coerce: true\n  });\n\n  if (result[0]) {\n    throw result[0];\n  } else {\n    return result[1];\n  }\n}\n/**\n * Mask a value, returning only the subset of properties defined by a struct.\n */\n\nfunction mask(value, struct) {\n  const result = validate(value, struct, {\n    coerce: true,\n    mask: true\n  });\n\n  if (result[0]) {\n    throw result[0];\n  } else {\n    return result[1];\n  }\n}\n/**\n * Check if a value passes a struct.\n */\n\nfunction is(value, struct) {\n  const result = validate(value, struct);\n  return !result[0];\n}\n/**\n * Validate a value against a struct, returning an error if invalid, or the\n * value (with potential coercion) if valid.\n */\n\nfunction validate(value, struct, options = {}) {\n  const tuples = run(value, struct, options);\n  const tuple = shiftIterator(tuples);\n\n  if (tuple[0]) {\n    const error = new StructError(tuple[0], function* () {\n      for (const t of tuples) {\n        if (t[0]) {\n          yield t[0];\n        }\n      }\n    });\n    return [error, undefined];\n  } else {\n    const v = tuple[1];\n    return [undefined, v];\n  }\n}\n\nfunction assign(...Structs) {\n  const schemas = Structs.map(s => s.schema);\n  const schema = Object.assign({}, ...schemas);\n  return object(schema);\n}\n/**\n * Define a new struct type with a custom validation function.\n */\n\nfunction define(name, validator) {\n  return new Struct({\n    type: name,\n    schema: null,\n    validator\n  });\n}\n/**\n * Create a new struct based on an existing struct, but the value is allowed to\n * be `undefined`. `log` will be called if the value is not `undefined`.\n */\n\nfunction deprecated(struct, log) {\n  return new Struct({ ...struct,\n    refiner: (value, ctx) => value === undefined || struct.refiner(value, ctx),\n\n    validator(value, ctx) {\n      if (value === undefined) {\n        return true;\n      } else {\n        log(value, ctx);\n        return struct.validator(value, ctx);\n      }\n    }\n\n  });\n}\n/**\n * Create a struct with dynamic validation logic.\n *\n * The callback will receive the value currently being validated, and must\n * return a struct object to validate it with. This can be useful to model\n * validation logic that changes based on its input.\n */\n\nfunction dynamic(fn) {\n  return new Struct({\n    type: 'dynamic',\n    schema: null,\n\n    *entries(value, ctx) {\n      const struct = fn(value, ctx);\n      yield* struct.entries(value, ctx);\n    },\n\n    validator(value, ctx) {\n      const struct = fn(value, ctx);\n      return struct.validator(value, ctx);\n    },\n\n    coercer(value, ctx) {\n      const struct = fn(value, ctx);\n      return struct.coercer(value, ctx);\n    }\n\n  });\n}\n/**\n * Create a struct with lazily evaluated validation logic.\n *\n * The first time validation is run with the struct, the callback will be called\n * and must return a struct object to use. This is useful for cases where you\n * want to have self-referential structs for nested data structures to avoid a\n * circular definition problem.\n */\n\nfunction lazy(fn) {\n  let struct;\n  return new Struct({\n    type: 'lazy',\n    schema: null,\n\n    *entries(value, ctx) {\n      var _struct;\n\n      (_struct = struct) != null ? _struct : struct = fn();\n      yield* struct.entries(value, ctx);\n    },\n\n    validator(value, ctx) {\n      var _struct2;\n\n      (_struct2 = struct) != null ? _struct2 : struct = fn();\n      return struct.validator(value, ctx);\n    },\n\n    coercer(value, ctx) {\n      var _struct3;\n\n      (_struct3 = struct) != null ? _struct3 : struct = fn();\n      return struct.coercer(value, ctx);\n    }\n\n  });\n}\n/**\n * Create a new struct based on an existing object struct, but excluding\n * specific properties.\n *\n * Like TypeScript's `Omit` utility.\n */\n\nfunction omit(struct, keys) {\n  const {\n    schema\n  } = struct;\n  const subschema = { ...schema\n  };\n\n  for (const key of keys) {\n    delete subschema[key];\n  }\n\n  return object(subschema);\n}\n/**\n * Create a new struct based on an existing object struct, but with all of its\n * properties allowed to be `undefined`.\n *\n * Like TypeScript's `Partial` utility.\n */\n\nfunction partial(struct) {\n  const schema = struct instanceof Struct ? { ...struct.schema\n  } : { ...struct\n  };\n\n  for (const key in schema) {\n    schema[key] = optional(schema[key]);\n  }\n\n  return object(schema);\n}\n/**\n * Create a new struct based on an existing object struct, but only including\n * specific properties.\n *\n * Like TypeScript's `Pick` utility.\n */\n\nfunction pick(struct, keys) {\n  const {\n    schema\n  } = struct;\n  const subschema = {};\n\n  for (const key of keys) {\n    subschema[key] = schema[key];\n  }\n\n  return object(subschema);\n}\n/**\n * Define a new struct type with a custom validation function.\n *\n * @deprecated This function has been renamed to `define`.\n */\n\nfunction struct(name, validator) {\n  console.warn('superstruct@0.11 - The `struct` helper has been renamed to `define`.');\n  return define(name, validator);\n}\n\n/**\n * Ensure that any value passes validation.\n */\n\nfunction any() {\n  return define('any', () => true);\n}\nfunction array(Element) {\n  return new Struct({\n    type: 'array',\n    schema: Element,\n\n    *entries(value) {\n      if (Element && Array.isArray(value)) {\n        for (const [i, v] of value.entries()) {\n          yield [i, v, Element];\n        }\n      }\n    },\n\n    coercer(value) {\n      return Array.isArray(value) ? value.slice() : value;\n    },\n\n    validator(value) {\n      return Array.isArray(value) || \"Expected an array value, but received: \" + print(value);\n    }\n\n  });\n}\n/**\n * Ensure that a value is a boolean.\n */\n\nfunction boolean() {\n  return define('boolean', value => {\n    return typeof value === 'boolean';\n  });\n}\n/**\n * Ensure that a value is a valid `Date`.\n *\n * Note: this also ensures that the value is *not* an invalid `Date` object,\n * which can occur when parsing a date fails but still returns a `Date`.\n */\n\nfunction date() {\n  return define('date', value => {\n    return value instanceof Date && !isNaN(value.getTime()) || \"Expected a valid `Date` object, but received: \" + print(value);\n  });\n}\nfunction enums(values) {\n  const schema = {};\n  const description = values.map(v => print(v)).join();\n\n  for (const key of values) {\n    schema[key] = key;\n  }\n\n  return new Struct({\n    type: 'enums',\n    schema,\n\n    validator(value) {\n      return values.includes(value) || \"Expected one of `\" + description + \"`, but received: \" + print(value);\n    }\n\n  });\n}\n/**\n * Ensure that a value is a function.\n */\n\nfunction func() {\n  return define('func', value => {\n    return typeof value === 'function' || \"Expected a function, but received: \" + print(value);\n  });\n}\n/**\n * Ensure that a value is an instance of a specific class.\n */\n\nfunction instance(Class) {\n  return define('instance', value => {\n    return value instanceof Class || \"Expected a `\" + Class.name + \"` instance, but received: \" + print(value);\n  });\n}\n/**\n * Ensure that a value is an integer.\n */\n\nfunction integer() {\n  return define('integer', value => {\n    return typeof value === 'number' && !isNaN(value) && Number.isInteger(value) || \"Expected an integer, but received: \" + print(value);\n  });\n}\nfunction intersection(Structs) {\n  return new Struct({\n    type: 'intersection',\n    schema: null,\n\n    *entries(value, ctx) {\n      for (const S of Structs) {\n        yield* S.entries(value, ctx);\n      }\n    },\n\n    *validator(value, ctx) {\n      for (const S of Structs) {\n        yield* S.validator(value, ctx);\n      }\n    },\n\n    *refiner(value, ctx) {\n      for (const S of Structs) {\n        yield* S.refiner(value, ctx);\n      }\n    }\n\n  });\n}\nfunction literal(constant) {\n  const description = print(constant);\n  const t = typeof constant;\n  return new Struct({\n    type: 'literal',\n    schema: t === 'string' || t === 'number' || t === 'boolean' ? constant : null,\n\n    validator(value) {\n      return value === constant || \"Expected the literal `\" + description + \"`, but received: \" + print(value);\n    }\n\n  });\n}\nfunction map(Key, Value) {\n  return new Struct({\n    type: 'map',\n    schema: null,\n\n    *entries(value) {\n      if (Key && Value && value instanceof Map) {\n        for (const [k, v] of value.entries()) {\n          yield [k, k, Key];\n          yield [k, v, Value];\n        }\n      }\n    },\n\n    coercer(value) {\n      return value instanceof Map ? new Map(value) : value;\n    },\n\n    validator(value) {\n      return value instanceof Map || \"Expected a `Map` object, but received: \" + print(value);\n    }\n\n  });\n}\n/**\n * Ensure that no value ever passes validation.\n */\n\nfunction never() {\n  return define('never', () => false);\n}\n/**\n * Augment an existing struct to allow `null` values.\n */\n\nfunction nullable(struct) {\n  return new Struct({ ...struct,\n    validator: (value, ctx) => value === null || struct.validator(value, ctx),\n    refiner: (value, ctx) => value === null || struct.refiner(value, ctx)\n  });\n}\n/**\n * Ensure that a value is a number.\n */\n\nfunction number() {\n  return define('number', value => {\n    return typeof value === 'number' && !isNaN(value) || \"Expected a number, but received: \" + print(value);\n  });\n}\nfunction object(schema) {\n  const knowns = schema ? Object.keys(schema) : [];\n  const Never = never();\n  return new Struct({\n    type: 'object',\n    schema: schema ? schema : null,\n\n    *entries(value) {\n      if (schema && isObject(value)) {\n        const unknowns = new Set(Object.keys(value));\n\n        for (const key of knowns) {\n          unknowns.delete(key);\n          yield [key, value[key], schema[key]];\n        }\n\n        for (const key of unknowns) {\n          yield [key, value[key], Never];\n        }\n      }\n    },\n\n    validator(value) {\n      return isObject(value) || \"Expected an object, but received: \" + print(value);\n    },\n\n    coercer(value) {\n      return isObject(value) ? { ...value\n      } : value;\n    }\n\n  });\n}\n/**\n * Augment a struct to allow `undefined` values.\n */\n\nfunction optional(struct) {\n  return new Struct({ ...struct,\n    validator: (value, ctx) => value === undefined || struct.validator(value, ctx),\n    refiner: (value, ctx) => value === undefined || struct.refiner(value, ctx)\n  });\n}\n/**\n * Ensure that a value is an object with keys and values of specific types, but\n * without ensuring any specific shape of properties.\n *\n * Like TypeScript's `Record` utility.\n */\n\nfunction record(Key, Value) {\n  return new Struct({\n    type: 'record',\n    schema: null,\n\n    *entries(value) {\n      if (isObject(value)) {\n        for (const k in value) {\n          const v = value[k];\n          yield [k, k, Key];\n          yield [k, v, Value];\n        }\n      }\n    },\n\n    validator(value) {\n      return isObject(value) || \"Expected an object, but received: \" + print(value);\n    }\n\n  });\n}\n/**\n * Ensure that a value is a `RegExp`.\n *\n * Note: this does not test the value against the regular expression! For that\n * you need to use the `pattern()` refinement.\n */\n\nfunction regexp() {\n  return define('regexp', value => {\n    return value instanceof RegExp;\n  });\n}\nfunction set(Element) {\n  return new Struct({\n    type: 'set',\n    schema: null,\n\n    *entries(value) {\n      if (Element && value instanceof Set) {\n        for (const v of value) {\n          yield [v, v, Element];\n        }\n      }\n    },\n\n    coercer(value) {\n      return value instanceof Set ? new Set(value) : value;\n    },\n\n    validator(value) {\n      return value instanceof Set || \"Expected a `Set` object, but received: \" + print(value);\n    }\n\n  });\n}\n/**\n * Ensure that a value is a string.\n */\n\nfunction string() {\n  return define('string', value => {\n    return typeof value === 'string' || \"Expected a string, but received: \" + print(value);\n  });\n}\nfunction tuple(Elements) {\n  const Never = never();\n  return new Struct({\n    type: 'tuple',\n    schema: null,\n\n    *entries(value) {\n      if (Array.isArray(value)) {\n        const length = Math.max(Elements.length, value.length);\n\n        for (let i = 0; i < length; i++) {\n          yield [i, value[i], Elements[i] || Never];\n        }\n      }\n    },\n\n    validator(value) {\n      return Array.isArray(value) || \"Expected an array, but received: \" + print(value);\n    }\n\n  });\n}\n/**\n * Ensure that a value has a set of known properties of specific types.\n *\n * Note: Unrecognized properties are allowed and untouched. This is similar to\n * how TypeScript's structural typing works.\n */\n\nfunction type(schema) {\n  const keys = Object.keys(schema);\n  return new Struct({\n    type: 'type',\n    schema,\n\n    *entries(value) {\n      if (isObject(value)) {\n        for (const k of keys) {\n          yield [k, value[k], schema[k]];\n        }\n      }\n    },\n\n    validator(value) {\n      return isObject(value) || \"Expected an object, but received: \" + print(value);\n    }\n\n  });\n}\nfunction union(Structs) {\n  const description = Structs.map(s => s.type).join(' | ');\n  return new Struct({\n    type: 'union',\n    schema: null,\n\n    validator(value, ctx) {\n      const failures = [];\n\n      for (const S of Structs) {\n        const [...tuples] = run(value, S, ctx);\n        const [first] = tuples;\n\n        if (!first[0]) {\n          return [];\n        } else {\n          for (const [failure] of tuples) {\n            if (failure) {\n              failures.push(failure);\n            }\n          }\n        }\n      }\n\n      return [\"Expected the value to satisfy a union of `\" + description + \"`, but received: \" + print(value), ...failures];\n    }\n\n  });\n}\n/**\n * Ensure that any value passes validation, without widening its type to `any`.\n */\n\nfunction unknown() {\n  return define('unknown', () => true);\n}\n\n/**\n * Augment a `Struct` to add an additional coercion step to its input.\n *\n * This allows you to transform input data before validating it, to increase the\n * likelihood that it passes validationâ€”for example for default values, parsing\n * different formats, etc.\n *\n * Note: You must use `create(value, Struct)` on the value to have the coercion\n * take effect! Using simply `assert()` or `is()` will not use coercion.\n */\n\nfunction coerce(struct, condition, coercer) {\n  return new Struct({ ...struct,\n    coercer: (value, ctx) => {\n      return is(value, condition) ? struct.coercer(coercer(value, ctx), ctx) : struct.coercer(value, ctx);\n    }\n  });\n}\n/**\n * Augment a struct to replace `undefined` values with a default.\n *\n * Note: You must use `create(value, Struct)` on the value to have the coercion\n * take effect! Using simply `assert()` or `is()` will not use coercion.\n */\n\nfunction defaulted(struct, fallback, options = {}) {\n  return coerce(struct, unknown(), x => {\n    const f = typeof fallback === 'function' ? fallback() : fallback;\n\n    if (x === undefined) {\n      return f;\n    }\n\n    if (!options.strict && isPlainObject(x) && isPlainObject(f)) {\n      const ret = { ...x\n      };\n      let changed = false;\n\n      for (const key in f) {\n        if (ret[key] === undefined) {\n          ret[key] = f[key];\n          changed = true;\n        }\n      }\n\n      if (changed) {\n        return ret;\n      }\n    }\n\n    return x;\n  });\n}\n/**\n * Augment a struct to trim string inputs.\n *\n * Note: You must use `create(value, Struct)` on the value to have the coercion\n * take effect! Using simply `assert()` or `is()` will not use coercion.\n */\n\nfunction trimmed(struct) {\n  return coerce(struct, string(), x => x.trim());\n}\n\n/**\n * Ensure that a string, array, map, or set is empty.\n */\n\nfunction empty(struct) {\n  const expected = \"Expected an empty \" + struct.type;\n  return refine(struct, 'empty', value => {\n    if (value instanceof Map || value instanceof Set) {\n      const {\n        size\n      } = value;\n      return size === 0 || expected + \" but received one with a size of `\" + size + \"`\";\n    } else {\n      const {\n        length\n      } = value;\n      return length === 0 || expected + \" but received one with a length of `\" + length + \"`\";\n    }\n  });\n}\n/**\n * Ensure that a number or date is below a threshold.\n */\n\nfunction max(struct, threshold, options = {}) {\n  const {\n    exclusive\n  } = options;\n  return refine(struct, 'max', value => {\n    return exclusive ? value < threshold : value <= threshold || \"Expected a \" + struct.type + \" greater than \" + (exclusive ? '' : 'or equal to ') + threshold + \" but received `\" + value + \"`\";\n  });\n}\n/**\n * Ensure that a number or date is above a threshold.\n */\n\nfunction min(struct, threshold, options = {}) {\n  const {\n    exclusive\n  } = options;\n  return refine(struct, 'min', value => {\n    return exclusive ? value > threshold : value >= threshold || \"Expected a \" + struct.type + \" greater than \" + (exclusive ? '' : 'or equal to ') + threshold + \" but received `\" + value + \"`\";\n  });\n}\n/**\n * Ensure that a string matches a regular expression.\n */\n\nfunction pattern(struct, regexp) {\n  return refine(struct, 'pattern', value => {\n    return regexp.test(value) || \"Expected a \" + struct.type + \" matching `/\" + regexp.source + \"/` but received \\\"\" + value + \"\\\"\";\n  });\n}\n/**\n * Ensure that a string, array, number, date, map, or set has a size (or length, or time) between `min` and `max`.\n */\n\nfunction size(struct, min, max = min) {\n  const expected = \"Expected a \" + struct.type;\n  const of = min === max ? \"of `\" + min + \"`\" : \"between `\" + min + \"` and `\" + max + \"`\";\n  return refine(struct, 'size', value => {\n    if (typeof value === 'number' || value instanceof Date) {\n      return min <= value && value <= max || expected + \" \" + of + \" but received `\" + value + \"`\";\n    } else if (value instanceof Map || value instanceof Set) {\n      const {\n        size\n      } = value;\n      return min <= size && size <= max || expected + \" with a size \" + of + \" but received one with a size of `\" + size + \"`\";\n    } else {\n      const {\n        length\n      } = value;\n      return min <= length && length <= max || expected + \" with a length \" + of + \" but received one with a length of `\" + length + \"`\";\n    }\n  });\n}\n/**\n * Augment a `Struct` to add an additional refinement to the validation.\n *\n * The refiner function is guaranteed to receive a value of the struct's type,\n * because the struct's existing validation will already have passed. This\n * allows you to layer additional validation on top of existing structs.\n */\n\nfunction refine(struct, name, refiner) {\n  return new Struct({ ...struct,\n\n    *refiner(value, ctx) {\n      yield* struct.refiner(value, ctx);\n      const result = refiner(value, ctx);\n      const failures = toFailures(result, ctx, struct, value);\n\n      for (const failure of failures) {\n        yield { ...failure,\n          refinement: name\n        };\n      }\n    }\n\n  });\n}\n\nexport { Struct, StructError, any, array, assert, assign, boolean, coerce, create, date, defaulted, define, deprecated, dynamic, empty, enums, func, instance, integer, intersection, is, lazy, literal, map, mask, max, min, never, nullable, number, object, omit, optional, partial, pattern, pick, record, refine, regexp, set, size, string, struct, trimmed, tuple, type, union, unknown, validate };\n//# sourceMappingURL=index.es.js.map\n","import { publicKey, struct, u32, u64, u8, option, vec } from '@coral-xyz/borsh';\nimport { Lockup, PublicKey } from '@solana/web3.js';\nimport BN from 'bn.js';\nimport {\n  Infer,\n  number,\n  nullable,\n  enums,\n  type,\n  coerce,\n  instance,\n  string,\n  optional,\n} from 'superstruct';\n\nexport interface Fee {\n  denominator: BN;\n  numerator: BN;\n}\n\nconst feeFields = [u64('denominator'), u64('numerator')];\n\nexport enum AccountType {\n  Uninitialized,\n  StakePool,\n  ValidatorList,\n}\n\nexport const BigNumFromString = coerce(instance(BN), string(), (value) => {\n  if (typeof value === 'string') return new BN(value, 10);\n  throw new Error('invalid big num');\n});\n\nexport const PublicKeyFromString = coerce(\n  instance(PublicKey),\n  string(),\n  (value) => new PublicKey(value),\n);\n\nexport type StakeAccountType = Infer<typeof StakeAccountType>;\nexport const StakeAccountType = enums(['uninitialized', 'initialized', 'delegated', 'rewardsPool']);\n\nexport type StakeMeta = Infer<typeof StakeMeta>;\nexport const StakeMeta = type({\n  rentExemptReserve: BigNumFromString,\n  authorized: type({\n    staker: PublicKeyFromString,\n    withdrawer: PublicKeyFromString,\n  }),\n  lockup: type({\n    unixTimestamp: number(),\n    epoch: number(),\n    custodian: PublicKeyFromString,\n  }),\n});\n\nexport type StakeAccountInfo = Infer<typeof StakeAccountInfo>;\nexport const StakeAccountInfo = type({\n  meta: StakeMeta,\n  stake: nullable(\n    type({\n      delegation: type({\n        voter: PublicKeyFromString,\n        stake: BigNumFromString,\n        activationEpoch: BigNumFromString,\n        deactivationEpoch: BigNumFromString,\n        warmupCooldownRate: number(),\n      }),\n      creditsObserved: number(),\n    }),\n  ),\n});\n\nexport type StakeAccount = Infer<typeof StakeAccount>;\nexport const StakeAccount = type({\n  type: StakeAccountType,\n  info: optional(StakeAccountInfo),\n});\n\nexport interface StakePool {\n  accountType: AccountType;\n  manager: PublicKey;\n  staker: PublicKey;\n  stakeDepositAuthority: PublicKey;\n  stakeWithdrawBumpSeed: number;\n  validatorList: PublicKey;\n  reserveStake: PublicKey;\n  poolMint: PublicKey;\n  managerFeeAccount: PublicKey;\n  tokenProgramId: PublicKey;\n  totalLamports: BN;\n  poolTokenSupply: BN;\n  lastUpdateEpoch: BN;\n  lockup: Lockup;\n  epochFee: Fee;\n  nextEpochFee?: Fee | undefined;\n  preferredDepositValidatorVoteAddress?: PublicKey | undefined;\n  preferredWithdrawValidatorVoteAddress?: PublicKey | undefined;\n  stakeDepositFee: Fee;\n  stakeWithdrawalFee: Fee;\n  nextStakeWithdrawalFee?: Fee | undefined;\n  stakeReferralFee: number;\n  solDepositAuthority?: PublicKey | undefined;\n  solDepositFee: Fee;\n  solReferralFee: number;\n  solWithdrawAuthority?: PublicKey | undefined;\n  solWithdrawalFee: Fee;\n  nextSolWithdrawalFee?: Fee | undefined;\n  lastEpochPoolTokenSupply: BN;\n  lastEpochTotalLamports: BN;\n}\n\nexport const StakePoolLayout = struct<StakePool>([\n  u8('accountType'),\n  publicKey('manager'),\n  publicKey('staker'),\n  publicKey('stakeDepositAuthority'),\n  u8('stakeWithdrawBumpSeed'),\n  publicKey('validatorList'),\n  publicKey('reserveStake'),\n  publicKey('poolMint'),\n  publicKey('managerFeeAccount'),\n  publicKey('tokenProgramId'),\n  u64('totalLamports'),\n  u64('poolTokenSupply'),\n  u64('lastUpdateEpoch'),\n  struct([u64('unixTimestamp'), u64('epoch'), publicKey('custodian')], 'lockup'),\n  struct(feeFields, 'epochFee'),\n  option(struct(feeFields), 'nextEpochFee'),\n  option(publicKey(), 'preferredDepositValidatorVoteAddress'),\n  option(publicKey(), 'preferredWithdrawValidatorVoteAddress'),\n  struct(feeFields, 'stakeDepositFee'),\n  struct(feeFields, 'stakeWithdrawalFee'),\n  option(struct(feeFields), 'nextStakeWithdrawalFee'),\n  u8('stakeReferralFee'),\n  option(publicKey(), 'solDepositAuthority'),\n  struct(feeFields, 'solDepositFee'),\n  u8('solReferralFee'),\n  option(publicKey(), 'solWithdrawAuthority'),\n  struct(feeFields, 'solWithdrawalFee'),\n  option(struct(feeFields), 'nextSolWithdrawalFee'),\n  u64('lastEpochPoolTokenSupply'),\n  u64('lastEpochTotalLamports'),\n]);\n\nexport enum ValidatorStakeInfoStatus {\n  Active,\n  DeactivatingTransient,\n  ReadyForRemoval,\n}\n\nexport interface ValidatorStakeInfo {\n  status: ValidatorStakeInfoStatus;\n  voteAccountAddress: PublicKey;\n  activeStakeLamports: BN;\n  transientStakeLamports: BN;\n  transientSeedSuffixStart: BN;\n  transientSeedSuffixEnd: BN;\n  lastUpdateEpoch: BN;\n}\n\nexport const ValidatorStakeInfoLayout = struct<ValidatorStakeInfo>([\n  /// Amount of active stake delegated to this validator\n  /// Note that if `last_update_epoch` does not match the current epoch then\n  /// this field may not be accurate\n  u64('activeStakeLamports'),\n  /// Amount of transient stake delegated to this validator\n  /// Note that if `last_update_epoch` does not match the current epoch then\n  /// this field may not be accurate\n  u64('transientStakeLamports'),\n  /// Last epoch the active and transient stake lamports fields were updated\n  u64('lastUpdateEpoch'),\n  /// Start of the validator transient account seed suffixes\n  u64('transientSeedSuffixStart'),\n  /// End of the validator transient account seed suffixes\n  u64('transientSeedSuffixEnd'),\n  /// Status of the validator stake account\n  u8('status'),\n  /// Validator vote account address\n  publicKey('voteAccountAddress'),\n]);\n\nexport interface ValidatorList {\n  /// Account type, must be ValidatorList currently\n  accountType: number;\n  /// Maximum allowable number of validators\n  maxValidators: number;\n  /// List of stake info for each validator in the pool\n  validators: ValidatorStakeInfo[];\n}\n\nexport const ValidatorListLayout = struct<ValidatorList>([\n  u8('accountType'),\n  u32('maxValidators'),\n  vec(ValidatorStakeInfoLayout, 'validators'),\n]);\n","import {\n  Connection,\n  Keypair,\n  PublicKey,\n  StakeProgram,\n  SystemProgram,\n  TransactionInstruction,\n} from '@solana/web3.js';\nimport { findStakeProgramAddress, findTransientStakeProgramAddress } from './program-address';\nimport BN from 'bn.js';\n\nimport { lamportsToSol } from './math';\nimport { WithdrawAccount } from '../index';\nimport {\n  Fee,\n  StakePool,\n  ValidatorList,\n  ValidatorListLayout,\n  ValidatorStakeInfoStatus,\n} from '../layouts';\nimport { MINIMUM_ACTIVE_STAKE, STAKE_POOL_PROGRAM_ID } from '../constants';\n\nexport async function getValidatorListAccount(connection: Connection, pubkey: PublicKey) {\n  const account = await connection.getAccountInfo(pubkey);\n  if (!account) {\n    throw new Error('Invalid validator list account');\n  }\n  return {\n    pubkey,\n    account: {\n      data: ValidatorListLayout.decode(account?.data) as ValidatorList,\n      executable: account.executable,\n      lamports: account.lamports,\n      owner: account.owner,\n    },\n  };\n}\n\nexport interface ValidatorAccount {\n  type: 'preferred' | 'active' | 'transient' | 'reserve';\n  voteAddress?: PublicKey | undefined;\n  stakeAddress: PublicKey;\n  lamports: number;\n}\n\nexport async function prepareWithdrawAccounts(\n  connection: Connection,\n  stakePool: StakePool,\n  stakePoolAddress: PublicKey,\n  amount: number,\n  compareFn?: (a: ValidatorAccount, b: ValidatorAccount) => number,\n  skipFee?: boolean,\n): Promise<WithdrawAccount[]> {\n  const validatorListAcc = await connection.getAccountInfo(stakePool.validatorList);\n  const validatorList = ValidatorListLayout.decode(validatorListAcc?.data) as ValidatorList;\n\n  if (!validatorList?.validators || validatorList?.validators.length == 0) {\n    throw new Error('No accounts found');\n  }\n\n  const minBalanceForRentExemption = await connection.getMinimumBalanceForRentExemption(\n    StakeProgram.space,\n  );\n  const minBalance = minBalanceForRentExemption + MINIMUM_ACTIVE_STAKE;\n\n  let accounts = [] as Array<{\n    type: 'preferred' | 'active' | 'transient' | 'reserve';\n    voteAddress?: PublicKey | undefined;\n    stakeAddress: PublicKey;\n    lamports: number;\n  }>;\n\n  // Prepare accounts\n  for (const validator of validatorList.validators) {\n    if (validator.status !== ValidatorStakeInfoStatus.Active) {\n      continue;\n    }\n\n    const stakeAccountAddress = await findStakeProgramAddress(\n      STAKE_POOL_PROGRAM_ID,\n      validator.voteAccountAddress,\n      stakePoolAddress,\n    );\n\n    if (!validator.activeStakeLamports.isZero()) {\n      const isPreferred = stakePool?.preferredWithdrawValidatorVoteAddress?.equals(\n        validator.voteAccountAddress,\n      );\n      accounts.push({\n        type: isPreferred ? 'preferred' : 'active',\n        voteAddress: validator.voteAccountAddress,\n        stakeAddress: stakeAccountAddress,\n        lamports: validator.activeStakeLamports.toNumber(),\n      });\n    }\n\n    const transientStakeLamports = validator.transientStakeLamports.toNumber() - minBalance;\n    if (transientStakeLamports > 0) {\n      const transientStakeAccountAddress = await findTransientStakeProgramAddress(\n        STAKE_POOL_PROGRAM_ID,\n        validator.voteAccountAddress,\n        stakePoolAddress,\n        validator.transientSeedSuffixStart,\n      );\n      accounts.push({\n        type: 'transient',\n        voteAddress: validator.voteAccountAddress,\n        stakeAddress: transientStakeAccountAddress,\n        lamports: transientStakeLamports,\n      });\n    }\n  }\n\n  // Sort from highest to lowest balance\n  accounts = accounts.sort(compareFn ? compareFn : (a, b) => b.lamports - a.lamports);\n\n  const reserveStake = await connection.getAccountInfo(stakePool.reserveStake);\n  const reserveStakeBalance = (reserveStake?.lamports ?? 0) - minBalanceForRentExemption - 1;\n  if (reserveStakeBalance > 0) {\n    accounts.push({\n      type: 'reserve',\n      stakeAddress: stakePool.reserveStake,\n      lamports: reserveStakeBalance,\n    });\n  }\n\n  // Prepare the list of accounts to withdraw from\n  const withdrawFrom: WithdrawAccount[] = [];\n  let remainingAmount = amount;\n\n  const fee = stakePool.stakeWithdrawalFee;\n  const inverseFee: Fee = {\n    numerator: fee.denominator.sub(fee.numerator),\n    denominator: fee.denominator,\n  };\n\n  for (const type of ['preferred', 'active', 'transient', 'reserve']) {\n    const filteredAccounts = accounts.filter((a) => a.type == type);\n\n    for (const { stakeAddress, voteAddress, lamports } of filteredAccounts) {\n      if (lamports <= minBalance && type == 'transient') {\n        continue;\n      }\n\n      let availableForWithdrawal = calcPoolTokensForDeposit(stakePool, lamports);\n\n      if (!skipFee && !inverseFee.numerator.isZero()) {\n        availableForWithdrawal = divideBnToNumber(\n          new BN(availableForWithdrawal).mul(inverseFee.denominator),\n          inverseFee.numerator,\n        );\n      }\n\n      const poolAmount = Math.min(availableForWithdrawal, remainingAmount);\n      if (poolAmount <= 0) {\n        continue;\n      }\n\n      // Those accounts will be withdrawn completely with `claim` instruction\n      withdrawFrom.push({ stakeAddress, voteAddress, poolAmount });\n      remainingAmount -= poolAmount;\n\n      if (remainingAmount == 0) {\n        break;\n      }\n    }\n\n    if (remainingAmount == 0) {\n      break;\n    }\n  }\n\n  // Not enough stake to withdraw the specified amount\n  if (remainingAmount > 0) {\n    throw new Error(\n      `No stake accounts found in this pool with enough balance to withdraw ${lamportsToSol(\n        amount,\n      )} pool tokens.`,\n    );\n  }\n\n  return withdrawFrom;\n}\n\n/**\n * Calculate the pool tokens that should be minted for a deposit of `stakeLamports`\n */\nexport function calcPoolTokensForDeposit(stakePool: StakePool, stakeLamports: number): number {\n  if (stakePool.poolTokenSupply.isZero() || stakePool.totalLamports.isZero()) {\n    return stakeLamports;\n  }\n  return Math.floor(\n    divideBnToNumber(new BN(stakeLamports).mul(stakePool.poolTokenSupply), stakePool.totalLamports),\n  );\n}\n\n/**\n * Calculate lamports amount on withdrawal\n */\nexport function calcLamportsWithdrawAmount(stakePool: StakePool, poolTokens: number): number {\n  const numerator = new BN(poolTokens).mul(stakePool.totalLamports);\n  const denominator = stakePool.poolTokenSupply;\n  if (numerator.lt(denominator)) {\n    return 0;\n  }\n  return divideBnToNumber(numerator, denominator);\n}\n\nexport function divideBnToNumber(numerator: BN, denominator: BN): number {\n  if (denominator.isZero()) {\n    return 0;\n  }\n  const quotient = numerator.div(denominator).toNumber();\n  const rem = numerator.umod(denominator);\n  const gcd = rem.gcd(denominator);\n  return quotient + rem.div(gcd).toNumber() / denominator.div(gcd).toNumber();\n}\n\nexport function newStakeAccount(\n  feePayer: PublicKey,\n  instructions: TransactionInstruction[],\n  lamports: number,\n): Keypair {\n  // Account for tokens not specified, creating one\n  const stakeReceiverKeypair = Keypair.generate();\n  console.log(`Creating account to receive stake ${stakeReceiverKeypair.publicKey}`);\n\n  instructions.push(\n    // Creating new account\n    SystemProgram.createAccount({\n      fromPubkey: feePayer,\n      newAccountPubkey: stakeReceiverKeypair.publicKey,\n      lamports,\n      space: StakeProgram.space,\n      programId: StakeProgram.programId,\n    }),\n  );\n\n  return stakeReceiverKeypair;\n}\n","import * as BufferLayout from '@solana/buffer-layout';\nimport { Buffer } from 'buffer';\n\n/**\n * @internal\n */\nexport type InstructionType = {\n  /** The Instruction index (from solana upstream program) */\n  index: number;\n  /** The BufferLayout to use to build data */\n  layout: BufferLayout.Layout<any>;\n};\n\n/**\n * Populate a buffer of instruction data using an InstructionType\n * @internal\n */\nexport function encodeData(type: InstructionType, fields?: any): Buffer {\n  const allocLength = type.layout.span;\n  const data = Buffer.alloc(allocLength);\n  const layoutFields = Object.assign({ instruction: type.index }, fields);\n  type.layout.encode(layoutFields, data);\n\n  return data;\n}\n\n/**\n * Decode instruction data buffer using an InstructionType\n * @internal\n */\nexport function decodeData(type: InstructionType, buffer: Buffer): any {\n  let data;\n  try {\n    data = type.layout.decode(buffer);\n  } catch (err) {\n    throw new Error('invalid instruction; ' + err);\n  }\n\n  if (data.instruction !== type.index) {\n    throw new Error(\n      `invalid instruction; instruction index mismatch ${data.instruction} != ${type.index}`,\n    );\n  }\n\n  return data;\n}\n","export * from './layout';\nexport * from './math';\nexport * from './program-address';\nexport * from './stake';\nexport * from './instruction';\n\nexport function arrayChunk(array: any[], size: number): any[] {\n  const result = [];\n  for (let i = 0; i < array.length; i += size) {\n    result.push(array.slice(i, i + size));\n  }\n  return result;\n}\n","import {\n  PublicKey,\n  STAKE_CONFIG_ID,\n  SYSVAR_CLOCK_PUBKEY,\n  SYSVAR_RENT_PUBKEY,\n  SYSVAR_STAKE_HISTORY_PUBKEY,\n  StakeProgram,\n  SystemProgram,\n  TransactionInstruction,\n} from '@solana/web3.js';\nimport * as BufferLayout from '@solana/buffer-layout';\nimport { TOKEN_PROGRAM_ID } from '@solana/spl-token';\nimport BN from 'bn.js';\nimport {\n  METADATA_MAX_NAME_LENGTH,\n  METADATA_MAX_SYMBOL_LENGTH,\n  METADATA_MAX_URI_LENGTH,\n  METADATA_PROGRAM_ID,\n  STAKE_POOL_PROGRAM_ID,\n} from './constants';\nimport { InstructionType, encodeData } from './utils';\nimport { Fee } from './index';\n\n/**\n * An enumeration of valid StakePoolInstructionType's\n */\nexport type StakePoolInstructionType =\n  | 'Initialize'\n  | 'AddValidatorToPool'\n  | 'RemoveValidatorFromPool'\n  | 'DecreaseValidatorStake'\n  | 'IncreaseValidatorStake'\n  // | 'SetPreferredValidator'\n  | 'UpdateValidatorListBalance'\n  | 'UpdateStakePoolBalance'\n  | 'CleanupRemovedValidatorEntries'\n  | 'DepositStake'\n  | 'WithdrawStake'\n  // | 'SetManager'\n  // | 'SetFee'\n  // | 'SetStaker'\n  | 'DepositSol'\n  // | 'SetFundingAuthority'\n  | 'WithdrawSol'\n  | 'CreateTokenMetadata'\n  | 'UpdateTokenMetadata'\n  | 'IncreaseAdditionalValidatorStake'\n  | 'DecreaseAdditionalValidatorStake'\n  | 'Redelegate';\n\nconst MOVE_STAKE_LAYOUT = BufferLayout.struct<any>([\n  BufferLayout.u8('instruction'),\n  BufferLayout.nu64('lamports'),\n  BufferLayout.nu64('transientStakeSeed'),\n]);\n\nconst TOKEN_METADATA_LAYOUT = BufferLayout.struct<any>([\n  BufferLayout.u8('instruction'),\n  BufferLayout.blob(METADATA_MAX_NAME_LENGTH, 'name'),\n  BufferLayout.blob(METADATA_MAX_SYMBOL_LENGTH, 'symbol'),\n  BufferLayout.blob(METADATA_MAX_URI_LENGTH, 'uri'),\n]);\n\nconst feeLayout = (property?: string) =>\n  BufferLayout.struct<any>(\n    [BufferLayout.nu64('denominator'), BufferLayout.nu64('numerator')],\n    property,\n  );\n\n/**\n * An enumeration of valid stake InstructionType's\n * @internal\n */\nexport const STAKE_POOL_INSTRUCTION_LAYOUTS: {\n  [type in StakePoolInstructionType]: InstructionType;\n} = Object.freeze({\n  /// Initializes a new StakePool.\n  Initialize: {\n    index: 0,\n    layout: BufferLayout.struct<any>([\n      BufferLayout.u8('instruction'),\n      feeLayout('fee'),\n      feeLayout('withdrawalFee'),\n      feeLayout('depositFee'),\n      feeLayout('referralFee'),\n      BufferLayout.u32('maxValidators'),\n    ]),\n  },\n  /// (Staker only) Adds stake account delegated to validator to the pool's list of managed validators.\n  AddValidatorToPool: {\n    index: 1,\n    layout: BufferLayout.struct<any>([\n      BufferLayout.u8('instruction'),\n      // Optional non-zero u32 seed used for generating the validator stake address\n      // OptionLayout.of(BufferLayout.u32('seed')),\n    ]),\n  },\n  /// (Staker only) Removes validator from the pool, deactivating its stake\n  RemoveValidatorFromPool: {\n    index: 2,\n    layout: BufferLayout.struct<any>([BufferLayout.u8('instruction')]),\n  },\n  /// (Staker only) Decrease active stake on a validator, eventually moving it to the reserve\n  DecreaseValidatorStake: {\n    index: 3,\n    layout: MOVE_STAKE_LAYOUT,\n  },\n  /// (Staker only) Increase stake on a validator from the reserve account\n  IncreaseValidatorStake: {\n    index: 4,\n    layout: MOVE_STAKE_LAYOUT,\n  },\n  // SetPreferredValidator: {\n  //   index: 5,\n  //   layout: BufferLayout.struct<any>([\n  //     BufferLayout.u8('instruction'),\n  //     BufferLayout.u8('validatorType'),\n  //     BufferLayout.u64('validatorVoteAddress'), // Option<Pubkey>\n  //   ]),\n  // },\n  UpdateValidatorListBalance: {\n    index: 6,\n    layout: BufferLayout.struct<any>([\n      BufferLayout.u8('instruction'),\n      BufferLayout.u32('startIndex'),\n      BufferLayout.u8('noMerge'),\n    ]),\n  },\n  UpdateStakePoolBalance: {\n    index: 7,\n    layout: BufferLayout.struct<any>([BufferLayout.u8('instruction')]),\n  },\n  CleanupRemovedValidatorEntries: {\n    index: 8,\n    layout: BufferLayout.struct<any>([BufferLayout.u8('instruction')]),\n  },\n  DepositStake: {\n    index: 9,\n    layout: BufferLayout.struct<any>([BufferLayout.u8('instruction')]),\n  },\n  /// Withdraw the token from the pool at the current ratio.\n  WithdrawStake: {\n    index: 10,\n    layout: BufferLayout.struct<any>([\n      BufferLayout.u8('instruction'),\n      BufferLayout.nu64('poolTokens'),\n    ]),\n  },\n  // /// (Manager only) Update manager\n  // SetManager: {\n  //   index: 11,\n  //   layout: BufferLayout.struct<any>([BufferLayout.u8('instruction')]),\n  // },\n  // /// (Manager only) Update fee\n  // SetFee: {\n  //   index: 12,\n  //   layout: BufferLayout.struct<any>([\n  //     BufferLayout.u8('instruction'),\n  //     // Type of fee to update and value to update it to\n  //     BufferLayout.nu64('fee'),\n  //   ]),\n  // },\n  // /// (Manager or staker only) Update staker\n  // SetStaker: {\n  //   index: 13,\n  //   layout: BufferLayout.struct<any>([BufferLayout.u8('instruction')]),\n  // },\n  /// Deposit SOL directly into the pool's reserve account. The output is a \"pool\" token\n  /// representing ownership into the pool. Inputs are converted to the current ratio.\n  DepositSol: {\n    index: 14,\n    layout: BufferLayout.struct<any>([\n      BufferLayout.u8('instruction'),\n      BufferLayout.nu64('lamports'),\n    ]),\n  },\n  // /// (Manager only) Update SOL deposit, stake deposit, or SOL withdrawal authority.\n  // SetFundingAuthority: {\n  //   index: 15,\n  // },\n  /// Withdraw SOL directly from the pool's reserve account. Fails if the\n  /// reserve does not have enough SOL.\n  WithdrawSol: {\n    index: 16,\n    layout: BufferLayout.struct<any>([\n      BufferLayout.u8('instruction'),\n      BufferLayout.nu64('poolTokens'),\n    ]),\n  },\n  /// Create token metadata for the stake-pool token in the\n  /// metaplex-token program\n  CreateTokenMetadata: {\n    index: 17,\n    layout: TOKEN_METADATA_LAYOUT,\n  },\n  /// Update token metadata for the stake-pool token in the\n  /// metaplex-token program\n  UpdateTokenMetadata: {\n    index: 18,\n    layout: TOKEN_METADATA_LAYOUT,\n  },\n  IncreaseAdditionalValidatorStake: {\n    index: 19,\n    layout: BufferLayout.struct<any>([\n      BufferLayout.u8('instruction'),\n      BufferLayout.nu64('lamports'),\n      BufferLayout.nu64('transientStakeSeed'),\n      BufferLayout.nu64('ephemeralStakeSeed'),\n    ]),\n  },\n  DecreaseAdditionalValidatorStake: {\n    index: 20,\n    layout: BufferLayout.struct<any>([\n      BufferLayout.u8('instruction'),\n      BufferLayout.nu64('lamports'),\n      BufferLayout.nu64('transientStakeSeed'),\n      BufferLayout.nu64('ephemeralStakeSeed'),\n    ]),\n  },\n  Redelegate: {\n    index: 21,\n    layout: BufferLayout.struct<any>([\n      BufferLayout.u8('instruction'),\n      /// Amount of lamports to redelegate\n      BufferLayout.nu64('lamports'),\n      /// Seed used to create source transient stake account\n      BufferLayout.nu64('sourceTransientStakeSeed'),\n      /// Seed used to create destination ephemeral account.\n      BufferLayout.nu64('ephemeralStakeSeed'),\n      /// Seed used to create destination transient stake account. If there is\n      /// already transient stake, this must match the current seed, otherwise\n      /// it can be anything\n      BufferLayout.nu64('destinationTransientStakeSeed'),\n    ]),\n  },\n});\n\nexport type InitializeParams = {\n  stakePool: PublicKey;\n  manager: PublicKey;\n  staker: PublicKey;\n  stakePoolWithdrawAuthority: PublicKey;\n  validatorList: PublicKey;\n  reserveStake: PublicKey;\n  poolMint: PublicKey;\n  managerPoolAccount: PublicKey;\n  depositAuthority?: PublicKey;\n  fee: Fee;\n  withdrawalFee: Fee;\n  depositFee: Fee;\n  referralFee: Fee;\n  maxValidators: number;\n};\n\nexport type AddValidatorToPoolParams = {\n  stakePool: PublicKey;\n  staker: PublicKey;\n  // reserveStake: PublicKey;\n  funder: PublicKey;\n  withdrawAuthority: PublicKey;\n  validatorList: PublicKey;\n  validatorStake: PublicKey;\n  validatorVote: PublicKey;\n  /// (Optional) Seed to used to create the validator stake account.\n  seed?: number;\n};\n\nexport type RemoveValidatorFromPoolParams = {\n  stakePool: PublicKey;\n  staker: PublicKey;\n  withdrawAuthority: PublicKey;\n  newStakeAuthority: PublicKey;\n  validatorList: PublicKey;\n  validatorStake: PublicKey;\n  transientStake: PublicKey;\n  destinationStake: PublicKey;\n};\n\n/**\n * Cleans up validator stake account entries marked as `ReadyForRemoval`\n */\nexport type CleanupRemovedValidatorEntriesParams = {\n  stakePool: PublicKey;\n  validatorList: PublicKey;\n};\n\n/**\n * Updates balances of validator and transient stake accounts in the pool.\n */\nexport type UpdateValidatorListBalanceParams = {\n  stakePool: PublicKey;\n  withdrawAuthority: PublicKey;\n  validatorList: PublicKey;\n  reserveStake: PublicKey;\n  validatorAndTransientStakePairs: PublicKey[];\n  startIndex: number;\n  noMerge: boolean;\n};\n\n/**\n * Updates total pool balance based on balances in the reserve and validator list.\n */\nexport type UpdateStakePoolBalanceParams = {\n  stakePool: PublicKey;\n  withdrawAuthority: PublicKey;\n  validatorList: PublicKey;\n  reserveStake: PublicKey;\n  managerFeeAccount: PublicKey;\n  poolMint: PublicKey;\n};\n\n/**\n * (Staker only) Decrease active stake on a validator, eventually moving it to the reserve\n */\nexport type DecreaseValidatorStakeParams = {\n  stakePool: PublicKey;\n  staker: PublicKey;\n  withdrawAuthority: PublicKey;\n  validatorList: PublicKey;\n  validatorStake: PublicKey;\n  transientStake: PublicKey;\n  // Amount of lamports to split into the transient stake account\n  lamports: number;\n  // Seed to used to create the transient stake account\n  transientStakeSeed: number;\n};\n\nexport interface DecreaseAdditionalValidatorStakeParams extends DecreaseValidatorStakeParams {\n  ephemeralStake: PublicKey;\n  ephemeralStakeSeed: number;\n}\n\n/**\n * (Staker only) Increase stake on a validator from the reserve account.\n */\nexport type IncreaseValidatorStakeParams = {\n  stakePool: PublicKey;\n  staker: PublicKey;\n  withdrawAuthority: PublicKey;\n  validatorList: PublicKey;\n  reserveStake: PublicKey;\n  transientStake: PublicKey;\n  validatorStake: PublicKey;\n  validatorVote: PublicKey;\n  // Amount of lamports to split into the transient stake account\n  lamports: number;\n  // Seed to used to create the transient stake account\n  transientStakeSeed: number;\n};\n\nexport interface IncreaseAdditionalValidatorStakeParams extends IncreaseValidatorStakeParams {\n  ephemeralStake: PublicKey;\n  ephemeralStakeSeed: number;\n}\n\n/**\n * Deposits a stake account into the pool in exchange for pool tokens\n */\nexport type DepositStakeParams = {\n  stakePool: PublicKey;\n  validatorList: PublicKey;\n  depositAuthority: PublicKey;\n  withdrawAuthority: PublicKey;\n  depositStake: PublicKey;\n  validatorStake: PublicKey;\n  reserveStake: PublicKey;\n  destinationPoolAccount: PublicKey;\n  managerFeeAccount: PublicKey;\n  referralPoolAccount: PublicKey;\n  poolMint: PublicKey;\n};\n\n/**\n * Withdraws a stake account from the pool in exchange for pool tokens\n */\nexport type WithdrawStakeParams = {\n  stakePool: PublicKey;\n  validatorList: PublicKey;\n  withdrawAuthority: PublicKey;\n  validatorStake: PublicKey;\n  destinationStake: PublicKey;\n  destinationStakeAuthority: PublicKey;\n  sourceTransferAuthority: PublicKey;\n  sourcePoolAccount: PublicKey;\n  managerFeeAccount: PublicKey;\n  poolMint: PublicKey;\n  poolTokens: number;\n};\n\n/**\n * Withdraw sol instruction params\n */\nexport type WithdrawSolParams = {\n  stakePool: PublicKey;\n  sourcePoolAccount: PublicKey;\n  withdrawAuthority: PublicKey;\n  reserveStake: PublicKey;\n  destinationSystemAccount: PublicKey;\n  sourceTransferAuthority: PublicKey;\n  solWithdrawAuthority?: PublicKey | undefined;\n  managerFeeAccount: PublicKey;\n  poolMint: PublicKey;\n  poolTokens: number;\n};\n\n/**\n * Deposit SOL directly into the pool's reserve account. The output is a \"pool\" token\n * representing ownership into the pool. Inputs are converted to the current ratio.\n */\nexport type DepositSolParams = {\n  stakePool: PublicKey;\n  depositAuthority?: PublicKey | undefined;\n  withdrawAuthority: PublicKey;\n  reserveStake: PublicKey;\n  fundingAccount: PublicKey;\n  destinationPoolAccount: PublicKey;\n  managerFeeAccount: PublicKey;\n  referralPoolAccount: PublicKey;\n  poolMint: PublicKey;\n  lamports: number;\n};\n\nexport type RedelegateParams = {\n  stakePool: PublicKey;\n  staker: PublicKey;\n  stakePoolWithdrawAuthority: PublicKey;\n  validatorList: PublicKey;\n  sourceValidatorStake: PublicKey;\n  sourceTransientStake: PublicKey;\n  ephemeralStake: PublicKey;\n  destinationTransientStake: PublicKey;\n  destinationValidatorStake: PublicKey;\n  validator: PublicKey;\n  // Amount of lamports to redelegate\n  lamports: number | BN;\n  // Seed used to create source transient stake account\n  sourceTransientStakeSeed: number | BN;\n  // Seed used to create destination ephemeral account\n  ephemeralStakeSeed: number | BN;\n  // Seed used to create destination transient stake account. If there is\n  // already transient stake, this must match the current seed, otherwise\n  // it can be anything\n  destinationTransientStakeSeed: number | BN;\n};\n\nexport type CreateTokenMetadataParams = {\n  stakePool: PublicKey;\n  manager: PublicKey;\n  tokenMetadata: PublicKey;\n  withdrawAuthority: PublicKey;\n  poolMint: PublicKey;\n  payer: PublicKey;\n  name: string;\n  symbol: string;\n  uri: string;\n};\n\nexport type UpdateTokenMetadataParams = {\n  stakePool: PublicKey;\n  manager: PublicKey;\n  tokenMetadata: PublicKey;\n  withdrawAuthority: PublicKey;\n  name: string;\n  symbol: string;\n  uri: string;\n};\n\n/**\n * Stake Pool Instruction class\n */\nexport class StakePoolInstruction {\n  /**\n   * Creates an 'initialize' instruction.\n   */\n  static initialize(params: InitializeParams) {\n    const type = STAKE_POOL_INSTRUCTION_LAYOUTS.Initialize;\n    const data = encodeData(type, {\n      fee: params.fee,\n      withdrawalFee: params.withdrawalFee,\n      depositFee: params.depositFee,\n      referralFee: params.referralFee,\n      maxValidators: params.maxValidators,\n    });\n\n    const keys = [\n      { pubkey: params.stakePool, isSigner: false, isWritable: true },\n      { pubkey: params.manager, isSigner: true, isWritable: false },\n      { pubkey: params.staker, isSigner: false, isWritable: false },\n      { pubkey: params.stakePoolWithdrawAuthority, isSigner: false, isWritable: false },\n      { pubkey: params.validatorList, isSigner: false, isWritable: true },\n      { pubkey: params.reserveStake, isSigner: false, isWritable: false },\n      { pubkey: params.poolMint, isSigner: false, isWritable: true },\n      { pubkey: params.managerPoolAccount, isSigner: false, isWritable: true },\n      { pubkey: TOKEN_PROGRAM_ID, isSigner: false, isWritable: false },\n    ];\n\n    if (params.depositAuthority) {\n      keys.push({ pubkey: params.depositAuthority, isSigner: true, isWritable: false });\n    }\n\n    return new TransactionInstruction({\n      programId: STAKE_POOL_PROGRAM_ID,\n      keys,\n      data,\n    });\n  }\n\n  /**\n   * Creates instruction to add a validator to the pool.\n   */\n  static addValidatorToPool(params: AddValidatorToPoolParams) {\n    const type = STAKE_POOL_INSTRUCTION_LAYOUTS.AddValidatorToPool;\n    const data = encodeData(type, { seed: params.seed });\n\n    const keys = [\n      { pubkey: params.stakePool, isSigner: false, isWritable: true },\n      { pubkey: params.staker, isSigner: true, isWritable: false },\n      { pubkey: params.funder, isSigner: true, isWritable: true },\n      // { pubkey: params.reserveStake, isSigner: false, isWritable: true },\n      { pubkey: params.withdrawAuthority, isSigner: false, isWritable: false },\n      { pubkey: params.validatorList, isSigner: false, isWritable: true },\n      { pubkey: params.validatorStake, isSigner: false, isWritable: true },\n      { pubkey: params.validatorVote, isSigner: false, isWritable: false },\n      { pubkey: SYSVAR_RENT_PUBKEY, isSigner: false, isWritable: false },\n      { pubkey: SYSVAR_CLOCK_PUBKEY, isSigner: false, isWritable: false },\n      { pubkey: SYSVAR_STAKE_HISTORY_PUBKEY, isSigner: false, isWritable: false },\n      { pubkey: STAKE_CONFIG_ID, isSigner: false, isWritable: false },\n      { pubkey: SystemProgram.programId, isSigner: false, isWritable: false },\n      { pubkey: StakeProgram.programId, isSigner: false, isWritable: false },\n    ];\n\n    return new TransactionInstruction({\n      programId: STAKE_POOL_PROGRAM_ID,\n      keys,\n      data,\n    });\n  }\n\n  /**\n   * Creates instruction to remove a validator from the pool.\n   */\n  static removeValidatorFromPool(params: RemoveValidatorFromPoolParams) {\n    const type = STAKE_POOL_INSTRUCTION_LAYOUTS.RemoveValidatorFromPool;\n    const data = encodeData(type);\n\n    const keys = [\n      { pubkey: params.stakePool, isSigner: false, isWritable: true },\n      { pubkey: params.staker, isSigner: true, isWritable: false },\n      { pubkey: params.withdrawAuthority, isSigner: false, isWritable: false },\n      { pubkey: params.newStakeAuthority, isSigner: false, isWritable: true },\n      { pubkey: params.validatorList, isSigner: false, isWritable: true },\n      { pubkey: params.validatorStake, isSigner: false, isWritable: true },\n      { pubkey: params.transientStake, isSigner: false, isWritable: false },\n      { pubkey: params.destinationStake, isSigner: false, isWritable: true },\n      { pubkey: SYSVAR_CLOCK_PUBKEY, isSigner: false, isWritable: false },\n      { pubkey: StakeProgram.programId, isSigner: false, isWritable: false },\n    ];\n\n    return new TransactionInstruction({\n      programId: STAKE_POOL_PROGRAM_ID,\n      keys,\n      data,\n    });\n  }\n\n  /**\n   * Creates instruction to update a set of validators in the stake pool.\n   */\n  static updateValidatorListBalance(\n    params: UpdateValidatorListBalanceParams,\n  ): TransactionInstruction {\n    const {\n      stakePool,\n      withdrawAuthority,\n      validatorList,\n      reserveStake,\n      startIndex,\n      noMerge,\n      validatorAndTransientStakePairs,\n    } = params;\n\n    const type = STAKE_POOL_INSTRUCTION_LAYOUTS.UpdateValidatorListBalance;\n    const data = encodeData(type, { startIndex, noMerge: noMerge ? 1 : 0 });\n\n    const keys = [\n      { pubkey: stakePool, isSigner: false, isWritable: false },\n      { pubkey: withdrawAuthority, isSigner: false, isWritable: false },\n      { pubkey: validatorList, isSigner: false, isWritable: true },\n      { pubkey: reserveStake, isSigner: false, isWritable: true },\n      { pubkey: SYSVAR_CLOCK_PUBKEY, isSigner: false, isWritable: false },\n      { pubkey: SYSVAR_STAKE_HISTORY_PUBKEY, isSigner: false, isWritable: false },\n      { pubkey: StakeProgram.programId, isSigner: false, isWritable: false },\n      ...validatorAndTransientStakePairs.map((pubkey) => ({\n        pubkey,\n        isSigner: false,\n        isWritable: true,\n      })),\n    ];\n\n    return new TransactionInstruction({\n      programId: STAKE_POOL_PROGRAM_ID,\n      keys,\n      data,\n    });\n  }\n\n  /**\n   * Creates instruction to update the overall stake pool balance.\n   */\n  static updateStakePoolBalance(params: UpdateStakePoolBalanceParams): TransactionInstruction {\n    const {\n      stakePool,\n      withdrawAuthority,\n      validatorList,\n      reserveStake,\n      managerFeeAccount,\n      poolMint,\n    } = params;\n\n    const type = STAKE_POOL_INSTRUCTION_LAYOUTS.UpdateStakePoolBalance;\n    const data = encodeData(type);\n\n    const keys = [\n      { pubkey: stakePool, isSigner: false, isWritable: true },\n      { pubkey: withdrawAuthority, isSigner: false, isWritable: false },\n      { pubkey: validatorList, isSigner: false, isWritable: true },\n      { pubkey: reserveStake, isSigner: false, isWritable: false },\n      { pubkey: managerFeeAccount, isSigner: false, isWritable: true },\n      { pubkey: poolMint, isSigner: false, isWritable: true },\n      { pubkey: TOKEN_PROGRAM_ID, isSigner: false, isWritable: false },\n    ];\n\n    return new TransactionInstruction({\n      programId: STAKE_POOL_PROGRAM_ID,\n      keys,\n      data,\n    });\n  }\n\n  /**\n   * Creates instruction to clean up removed validator entries.\n   */\n  static cleanupRemovedValidatorEntries(\n    params: CleanupRemovedValidatorEntriesParams,\n  ): TransactionInstruction {\n    const { stakePool, validatorList } = params;\n\n    const type = STAKE_POOL_INSTRUCTION_LAYOUTS.CleanupRemovedValidatorEntries;\n    const data = encodeData(type);\n\n    const keys = [\n      { pubkey: stakePool, isSigner: false, isWritable: false },\n      { pubkey: validatorList, isSigner: false, isWritable: true },\n    ];\n\n    return new TransactionInstruction({\n      programId: STAKE_POOL_PROGRAM_ID,\n      keys,\n      data,\n    });\n  }\n\n  /**\n   * Creates `IncreaseValidatorStake` instruction (rebalance from reserve account to\n   * transient account)\n   */\n  static increaseValidatorStake(params: IncreaseValidatorStakeParams): TransactionInstruction {\n    const {\n      stakePool,\n      staker,\n      withdrawAuthority,\n      validatorList,\n      reserveStake,\n      transientStake,\n      validatorStake,\n      validatorVote,\n      lamports,\n      transientStakeSeed,\n    } = params;\n\n    const type = STAKE_POOL_INSTRUCTION_LAYOUTS.IncreaseValidatorStake;\n    const data = encodeData(type, { lamports, transientStakeSeed });\n\n    const keys = [\n      { pubkey: stakePool, isSigner: false, isWritable: false },\n      { pubkey: staker, isSigner: true, isWritable: false },\n      { pubkey: withdrawAuthority, isSigner: false, isWritable: false },\n      { pubkey: validatorList, isSigner: false, isWritable: true },\n      { pubkey: reserveStake, isSigner: false, isWritable: true },\n      { pubkey: transientStake, isSigner: false, isWritable: true },\n      // TODO: will be available in the new stake pool\n      // { pubkey: validatorStake, isSigner: false, isWritable: false },\n      { pubkey: validatorVote, isSigner: false, isWritable: false },\n      { pubkey: SYSVAR_CLOCK_PUBKEY, isSigner: false, isWritable: false },\n      { pubkey: SYSVAR_RENT_PUBKEY, isSigner: false, isWritable: false },\n      { pubkey: SYSVAR_STAKE_HISTORY_PUBKEY, isSigner: false, isWritable: false },\n      { pubkey: STAKE_CONFIG_ID, isSigner: false, isWritable: false },\n      { pubkey: SystemProgram.programId, isSigner: false, isWritable: false },\n      { pubkey: StakeProgram.programId, isSigner: false, isWritable: false },\n    ];\n\n    return new TransactionInstruction({\n      programId: STAKE_POOL_PROGRAM_ID,\n      keys,\n      data,\n    });\n  }\n\n  /**\n   * Creates `IncreaseAdditionalValidatorStake` instruction (rebalance from reserve account to\n   * transient account)\n   */\n  static increaseAdditionalValidatorStake(\n    params: IncreaseAdditionalValidatorStakeParams,\n  ): TransactionInstruction {\n    const {\n      stakePool,\n      staker,\n      withdrawAuthority,\n      validatorList,\n      reserveStake,\n      transientStake,\n      validatorStake,\n      validatorVote,\n      lamports,\n      transientStakeSeed,\n      ephemeralStake,\n      ephemeralStakeSeed,\n    } = params;\n\n    const type = STAKE_POOL_INSTRUCTION_LAYOUTS.IncreaseAdditionalValidatorStake;\n    const data = encodeData(type, { lamports, transientStakeSeed, ephemeralStakeSeed });\n\n    const keys = [\n      { pubkey: stakePool, isSigner: false, isWritable: false },\n      { pubkey: staker, isSigner: true, isWritable: false },\n      { pubkey: withdrawAuthority, isSigner: false, isWritable: false },\n      { pubkey: validatorList, isSigner: false, isWritable: true },\n      { pubkey: reserveStake, isSigner: false, isWritable: true },\n      { pubkey: ephemeralStake, isSigner: false, isWritable: true },\n      { pubkey: transientStake, isSigner: false, isWritable: true },\n      { pubkey: validatorStake, isSigner: false, isWritable: false },\n      { pubkey: validatorVote, isSigner: false, isWritable: false },\n      { pubkey: SYSVAR_CLOCK_PUBKEY, isSigner: false, isWritable: false },\n      { pubkey: SYSVAR_STAKE_HISTORY_PUBKEY, isSigner: false, isWritable: false },\n      { pubkey: STAKE_CONFIG_ID, isSigner: false, isWritable: false },\n      { pubkey: SystemProgram.programId, isSigner: false, isWritable: false },\n      { pubkey: StakeProgram.programId, isSigner: false, isWritable: false },\n    ];\n\n    return new TransactionInstruction({\n      programId: STAKE_POOL_PROGRAM_ID,\n      keys,\n      data,\n    });\n  }\n\n  /**\n   * Creates `DecreaseValidatorStake` instruction (rebalance from validator account to\n   * transient account)\n   */\n  static decreaseValidatorStake(params: DecreaseValidatorStakeParams): TransactionInstruction {\n    const {\n      stakePool,\n      staker,\n      withdrawAuthority,\n      validatorList,\n      validatorStake,\n      transientStake,\n      lamports,\n      transientStakeSeed,\n    } = params;\n\n    const type = STAKE_POOL_INSTRUCTION_LAYOUTS.DecreaseValidatorStake;\n    const data = encodeData(type, { lamports, transientStakeSeed });\n\n    const keys = [\n      { pubkey: stakePool, isSigner: false, isWritable: false },\n      { pubkey: staker, isSigner: true, isWritable: false },\n      { pubkey: withdrawAuthority, isSigner: false, isWritable: false },\n      { pubkey: validatorList, isSigner: false, isWritable: true },\n      { pubkey: validatorStake, isSigner: false, isWritable: true },\n      { pubkey: transientStake, isSigner: false, isWritable: true },\n      { pubkey: SYSVAR_CLOCK_PUBKEY, isSigner: false, isWritable: false },\n      { pubkey: SYSVAR_RENT_PUBKEY, isSigner: false, isWritable: false },\n      { pubkey: SystemProgram.programId, isSigner: false, isWritable: false },\n      { pubkey: StakeProgram.programId, isSigner: false, isWritable: false },\n    ];\n\n    return new TransactionInstruction({\n      programId: STAKE_POOL_PROGRAM_ID,\n      keys,\n      data,\n    });\n  }\n\n  /**\n   * Creates `DecreaseAdditionalValidatorStake` instruction (rebalance from\n   * validator account to transient account)\n   */\n  static decreaseAdditionalValidatorStake(\n    params: DecreaseAdditionalValidatorStakeParams,\n  ): TransactionInstruction {\n    const {\n      stakePool,\n      staker,\n      withdrawAuthority,\n      validatorList,\n      validatorStake,\n      transientStake,\n      lamports,\n      transientStakeSeed,\n      ephemeralStakeSeed,\n      ephemeralStake,\n    } = params;\n\n    const type = STAKE_POOL_INSTRUCTION_LAYOUTS.DecreaseAdditionalValidatorStake;\n    const data = encodeData(type, { lamports, transientStakeSeed, ephemeralStakeSeed });\n\n    const keys = [\n      { pubkey: stakePool, isSigner: false, isWritable: false },\n      { pubkey: staker, isSigner: true, isWritable: false },\n      { pubkey: withdrawAuthority, isSigner: false, isWritable: false },\n      { pubkey: validatorList, isSigner: false, isWritable: true },\n      { pubkey: validatorStake, isSigner: false, isWritable: true },\n      { pubkey: ephemeralStake, isSigner: false, isWritable: true },\n      { pubkey: transientStake, isSigner: false, isWritable: true },\n      { pubkey: SYSVAR_CLOCK_PUBKEY, isSigner: false, isWritable: false },\n      { pubkey: SYSVAR_STAKE_HISTORY_PUBKEY, isSigner: false, isWritable: false },\n      { pubkey: SystemProgram.programId, isSigner: false, isWritable: false },\n      { pubkey: StakeProgram.programId, isSigner: false, isWritable: false },\n    ];\n\n    return new TransactionInstruction({\n      programId: STAKE_POOL_PROGRAM_ID,\n      keys,\n      data,\n    });\n  }\n\n  /**\n   * Creates a transaction instruction to deposit a stake account into a stake pool.\n   */\n  static depositStake(params: DepositStakeParams): TransactionInstruction {\n    const {\n      stakePool,\n      validatorList,\n      depositAuthority,\n      withdrawAuthority,\n      depositStake,\n      validatorStake,\n      reserveStake,\n      destinationPoolAccount,\n      managerFeeAccount,\n      referralPoolAccount,\n      poolMint,\n    } = params;\n\n    const type = STAKE_POOL_INSTRUCTION_LAYOUTS.DepositStake;\n    const data = encodeData(type);\n\n    const keys = [\n      { pubkey: stakePool, isSigner: false, isWritable: true },\n      { pubkey: validatorList, isSigner: false, isWritable: true },\n      { pubkey: depositAuthority, isSigner: false, isWritable: false },\n      { pubkey: withdrawAuthority, isSigner: false, isWritable: false },\n      { pubkey: depositStake, isSigner: false, isWritable: true },\n      { pubkey: validatorStake, isSigner: false, isWritable: true },\n      { pubkey: reserveStake, isSigner: false, isWritable: true },\n      { pubkey: destinationPoolAccount, isSigner: false, isWritable: true },\n      { pubkey: managerFeeAccount, isSigner: false, isWritable: true },\n      { pubkey: referralPoolAccount, isSigner: false, isWritable: true },\n      { pubkey: poolMint, isSigner: false, isWritable: true },\n      { pubkey: SYSVAR_CLOCK_PUBKEY, isSigner: false, isWritable: false },\n      { pubkey: SYSVAR_STAKE_HISTORY_PUBKEY, isSigner: false, isWritable: false },\n      { pubkey: TOKEN_PROGRAM_ID, isSigner: false, isWritable: false },\n      { pubkey: StakeProgram.programId, isSigner: false, isWritable: false },\n    ];\n\n    return new TransactionInstruction({\n      programId: STAKE_POOL_PROGRAM_ID,\n      keys,\n      data,\n    });\n  }\n\n  /**\n   * Creates a transaction instruction to deposit SOL into a stake pool.\n   */\n  static depositSol(params: DepositSolParams): TransactionInstruction {\n    const {\n      stakePool,\n      withdrawAuthority,\n      depositAuthority,\n      reserveStake,\n      fundingAccount,\n      destinationPoolAccount,\n      managerFeeAccount,\n      referralPoolAccount,\n      poolMint,\n      lamports,\n    } = params;\n\n    const type = STAKE_POOL_INSTRUCTION_LAYOUTS.DepositSol;\n    const data = encodeData(type, { lamports });\n\n    const keys = [\n      { pubkey: stakePool, isSigner: false, isWritable: true },\n      { pubkey: withdrawAuthority, isSigner: false, isWritable: false },\n      { pubkey: reserveStake, isSigner: false, isWritable: true },\n      { pubkey: fundingAccount, isSigner: true, isWritable: true },\n      { pubkey: destinationPoolAccount, isSigner: false, isWritable: true },\n      { pubkey: managerFeeAccount, isSigner: false, isWritable: true },\n      { pubkey: referralPoolAccount, isSigner: false, isWritable: true },\n      { pubkey: poolMint, isSigner: false, isWritable: true },\n      { pubkey: SystemProgram.programId, isSigner: false, isWritable: false },\n      { pubkey: TOKEN_PROGRAM_ID, isSigner: false, isWritable: false },\n    ];\n\n    if (depositAuthority) {\n      keys.push({\n        pubkey: depositAuthority,\n        isSigner: true,\n        isWritable: false,\n      });\n    }\n\n    return new TransactionInstruction({\n      programId: STAKE_POOL_PROGRAM_ID,\n      keys,\n      data,\n    });\n  }\n\n  /**\n   * Creates a transaction instruction to withdraw active stake from a stake pool.\n   */\n  static withdrawStake(params: WithdrawStakeParams): TransactionInstruction {\n    const {\n      stakePool,\n      validatorList,\n      withdrawAuthority,\n      validatorStake,\n      destinationStake,\n      destinationStakeAuthority,\n      sourceTransferAuthority,\n      sourcePoolAccount,\n      managerFeeAccount,\n      poolMint,\n      poolTokens,\n    } = params;\n\n    const type = STAKE_POOL_INSTRUCTION_LAYOUTS.WithdrawStake;\n    const data = encodeData(type, { poolTokens });\n\n    const keys = [\n      { pubkey: stakePool, isSigner: false, isWritable: true },\n      { pubkey: validatorList, isSigner: false, isWritable: true },\n      { pubkey: withdrawAuthority, isSigner: false, isWritable: false },\n      { pubkey: validatorStake, isSigner: false, isWritable: true },\n      { pubkey: destinationStake, isSigner: false, isWritable: true },\n      { pubkey: destinationStakeAuthority, isSigner: false, isWritable: false },\n      { pubkey: sourceTransferAuthority, isSigner: true, isWritable: false },\n      { pubkey: sourcePoolAccount, isSigner: false, isWritable: true },\n      { pubkey: managerFeeAccount, isSigner: false, isWritable: true },\n      { pubkey: poolMint, isSigner: false, isWritable: true },\n      { pubkey: SYSVAR_CLOCK_PUBKEY, isSigner: false, isWritable: false },\n      { pubkey: TOKEN_PROGRAM_ID, isSigner: false, isWritable: false },\n      { pubkey: StakeProgram.programId, isSigner: false, isWritable: false },\n    ];\n\n    return new TransactionInstruction({\n      programId: STAKE_POOL_PROGRAM_ID,\n      keys,\n      data,\n    });\n  }\n\n  /**\n   * Creates a transaction instruction to withdraw SOL from a stake pool.\n   */\n  static withdrawSol(params: WithdrawSolParams): TransactionInstruction {\n    const {\n      stakePool,\n      withdrawAuthority,\n      sourceTransferAuthority,\n      sourcePoolAccount,\n      reserveStake,\n      destinationSystemAccount,\n      managerFeeAccount,\n      solWithdrawAuthority,\n      poolMint,\n      poolTokens,\n    } = params;\n\n    const type = STAKE_POOL_INSTRUCTION_LAYOUTS.WithdrawSol;\n    const data = encodeData(type, { poolTokens });\n\n    const keys = [\n      { pubkey: stakePool, isSigner: false, isWritable: true },\n      { pubkey: withdrawAuthority, isSigner: false, isWritable: false },\n      { pubkey: sourceTransferAuthority, isSigner: true, isWritable: false },\n      { pubkey: sourcePoolAccount, isSigner: false, isWritable: true },\n      { pubkey: reserveStake, isSigner: false, isWritable: true },\n      { pubkey: destinationSystemAccount, isSigner: false, isWritable: true },\n      { pubkey: managerFeeAccount, isSigner: false, isWritable: true },\n      { pubkey: poolMint, isSigner: false, isWritable: true },\n      { pubkey: SYSVAR_CLOCK_PUBKEY, isSigner: false, isWritable: false },\n      { pubkey: SYSVAR_STAKE_HISTORY_PUBKEY, isSigner: false, isWritable: false },\n      { pubkey: StakeProgram.programId, isSigner: false, isWritable: false },\n      { pubkey: TOKEN_PROGRAM_ID, isSigner: false, isWritable: false },\n    ];\n\n    if (solWithdrawAuthority) {\n      keys.push({\n        pubkey: solWithdrawAuthority,\n        isSigner: true,\n        isWritable: false,\n      });\n    }\n\n    return new TransactionInstruction({\n      programId: STAKE_POOL_PROGRAM_ID,\n      keys,\n      data,\n    });\n  }\n\n  /**\n   * Creates an instruction to create metadata\n   * using the mpl token metadata program for the pool token\n   */\n  static createTokenMetadata(params: CreateTokenMetadataParams): TransactionInstruction {\n    const {\n      stakePool,\n      withdrawAuthority,\n      tokenMetadata,\n      manager,\n      payer,\n      poolMint,\n      name,\n      symbol,\n      uri,\n    } = params;\n\n    const keys = [\n      { pubkey: stakePool, isSigner: false, isWritable: false },\n      { pubkey: manager, isSigner: true, isWritable: false },\n      { pubkey: withdrawAuthority, isSigner: false, isWritable: false },\n      { pubkey: poolMint, isSigner: false, isWritable: false },\n      { pubkey: payer, isSigner: true, isWritable: true },\n      { pubkey: tokenMetadata, isSigner: false, isWritable: true },\n      { pubkey: METADATA_PROGRAM_ID, isSigner: false, isWritable: false },\n      { pubkey: SystemProgram.programId, isSigner: false, isWritable: false },\n      { pubkey: SYSVAR_RENT_PUBKEY, isSigner: false, isWritable: false },\n    ];\n\n    const data = encodeData(STAKE_POOL_INSTRUCTION_LAYOUTS.CreateTokenMetadata, {\n      name: new TextEncoder().encode(name.padEnd(METADATA_MAX_NAME_LENGTH, '\\0')),\n      symbol: new TextEncoder().encode(symbol.padEnd(METADATA_MAX_SYMBOL_LENGTH, '\\0')),\n      uri: new TextEncoder().encode(uri.padEnd(METADATA_MAX_URI_LENGTH, '\\0')),\n    });\n\n    return new TransactionInstruction({\n      programId: STAKE_POOL_PROGRAM_ID,\n      keys,\n      data,\n    });\n  }\n\n  /**\n   * Creates an instruction to update metadata\n   * in the mpl token metadata program account for the pool token\n   */\n  static updateTokenMetadata(params: UpdateTokenMetadataParams): TransactionInstruction {\n    const { stakePool, withdrawAuthority, tokenMetadata, manager, name, symbol, uri } = params;\n\n    const keys = [\n      { pubkey: stakePool, isSigner: false, isWritable: false },\n      { pubkey: manager, isSigner: true, isWritable: false },\n      { pubkey: withdrawAuthority, isSigner: false, isWritable: false },\n      { pubkey: tokenMetadata, isSigner: false, isWritable: true },\n      { pubkey: METADATA_PROGRAM_ID, isSigner: false, isWritable: false },\n    ];\n\n    const data = encodeData(STAKE_POOL_INSTRUCTION_LAYOUTS.UpdateTokenMetadata, {\n      name: new TextEncoder().encode(name.padEnd(METADATA_MAX_NAME_LENGTH, '\\0')),\n      symbol: new TextEncoder().encode(symbol.padEnd(METADATA_MAX_SYMBOL_LENGTH, '\\0')),\n      uri: new TextEncoder().encode(uri.padEnd(METADATA_MAX_URI_LENGTH, '\\0')),\n    });\n\n    return new TransactionInstruction({\n      programId: STAKE_POOL_PROGRAM_ID,\n      keys,\n      data,\n    });\n  }\n\n  /**\n   * Creates `Redelegate` instruction (rebalance from one validator account to another)\n   * @param params\n   */\n  static redelegate(params: RedelegateParams): TransactionInstruction {\n    const {\n      stakePool,\n      staker,\n      stakePoolWithdrawAuthority,\n      validatorList,\n      sourceValidatorStake,\n      sourceTransientStake,\n      ephemeralStake,\n      destinationTransientStake,\n      destinationValidatorStake,\n      validator,\n      lamports,\n      sourceTransientStakeSeed,\n      ephemeralStakeSeed,\n      destinationTransientStakeSeed,\n    } = params;\n\n    const keys = [\n      { pubkey: stakePool, isSigner: false, isWritable: false },\n      { pubkey: staker, isSigner: true, isWritable: false },\n      { pubkey: stakePoolWithdrawAuthority, isSigner: false, isWritable: false },\n      { pubkey: validatorList, isSigner: false, isWritable: true },\n      { pubkey: sourceValidatorStake, isSigner: false, isWritable: true },\n      { pubkey: sourceTransientStake, isSigner: false, isWritable: true },\n      { pubkey: ephemeralStake, isSigner: false, isWritable: true },\n      { pubkey: destinationTransientStake, isSigner: false, isWritable: true },\n      { pubkey: destinationValidatorStake, isSigner: false, isWritable: false },\n      { pubkey: validator, isSigner: false, isWritable: false },\n      { pubkey: SYSVAR_CLOCK_PUBKEY, isSigner: false, isWritable: false },\n      { pubkey: SYSVAR_STAKE_HISTORY_PUBKEY, isSigner: false, isWritable: false },\n      { pubkey: STAKE_CONFIG_ID, isSigner: false, isWritable: false },\n      { pubkey: SystemProgram.programId, isSigner: false, isWritable: false },\n      { pubkey: StakeProgram.programId, isSigner: false, isWritable: false },\n    ];\n\n    const data = encodeData(STAKE_POOL_INSTRUCTION_LAYOUTS.Redelegate, {\n      lamports,\n      sourceTransientStakeSeed,\n      ephemeralStakeSeed,\n      destinationTransientStakeSeed,\n    });\n\n    return new TransactionInstruction({\n      programId: STAKE_POOL_PROGRAM_ID,\n      keys,\n      data,\n    });\n  }\n}\n","import {\n  AccountInfo,\n  Connection,\n  Keypair,\n  PublicKey,\n  Signer,\n  StakeAuthorizationLayout,\n  StakeProgram,\n  SystemProgram,\n  TransactionInstruction,\n} from '@solana/web3.js';\nimport {\n  createApproveInstruction,\n  createAssociatedTokenAccountIdempotentInstruction,\n  getAccount,\n  getAssociatedTokenAddressSync,\n} from '@solana/spl-token';\nimport {\n  ValidatorAccount,\n  arrayChunk,\n  calcLamportsWithdrawAmount,\n  findStakeProgramAddress,\n  findTransientStakeProgramAddress,\n  findWithdrawAuthorityProgramAddress,\n  getValidatorListAccount,\n  newStakeAccount,\n  prepareWithdrawAccounts,\n  lamportsToSol,\n  solToLamports,\n  findEphemeralStakeProgramAddress,\n  findTokenMetadataAddress,\n} from './utils';\nimport { StakePoolInstruction } from './instructions';\nimport {\n  StakeAccount,\n  StakePool,\n  StakePoolLayout,\n  ValidatorList,\n  ValidatorListLayout,\n  ValidatorStakeInfo,\n  ValidatorStakeInfoLayout,\n} from './layouts';\nimport { MAX_VALIDATORS_TO_UPDATE, MINIMUM_ACTIVE_STAKE, STAKE_POOL_PROGRAM_ID } from './constants';\nimport { create } from 'superstruct';\nimport BN from 'bn.js';\n\nexport type { StakePool, AccountType, ValidatorList, ValidatorStakeInfo } from './layouts';\nexport { STAKE_POOL_PROGRAM_ID } from './constants';\nexport * from './instructions';\n\nexport interface ValidatorListAccount {\n  pubkey: PublicKey;\n  account: AccountInfo<ValidatorList>;\n}\n\nexport interface StakePoolAccount {\n  pubkey: PublicKey;\n  account: AccountInfo<StakePool>;\n}\n\nexport interface WithdrawAccount {\n  stakeAddress: PublicKey;\n  voteAddress?: PublicKey;\n  poolAmount: number;\n}\n\nexport interface Fee {\n  denominator: BN;\n  numerator: BN;\n}\n\n/**\n * Wrapper class for a stake pool.\n * Each stake pool has a stake pool account and a validator list account.\n */\nexport interface StakePoolAccounts {\n  stakePool: StakePoolAccount | undefined;\n  validatorList: ValidatorListAccount | undefined;\n}\n\ninterface InitializeProps {\n  connection: Connection;\n  manager: Keypair;\n  stakePool: Keypair;\n  validatorList: Keypair;\n  poolMint: PublicKey;\n  reserveStake: PublicKey;\n  managerPoolAccount: PublicKey;\n  fee: Fee;\n  referralFee: Fee;\n  maxValidators: number;\n}\n\ninterface UpdateStakePoolTokenMetadataProps {\n  connection: Connection;\n  stakePool: StakePoolAccount | PublicKey;\n  tokenMetadata?: PublicKey;\n  name: string;\n  symbol: string;\n  uri: string;\n}\n\ninterface CreateStakePoolTokenMetadataProps extends UpdateStakePoolTokenMetadataProps {\n  payer: PublicKey;\n}\n\ninterface RedelegateProps {\n  connection: Connection;\n  stakePoolAddress: PublicKey;\n  sourceVoteAccount: PublicKey;\n  destinationVoteAccount: PublicKey;\n  sourceTransientStakeSeed: number | BN;\n  destinationTransientStakeSeed: number | BN;\n  ephemeralStakeSeed: number | BN;\n  lamports: number | BN;\n}\n\n/**\n * Retrieves and deserializes a StakePool account using a web3js connection and the stake pool address.\n * @param connection: An active web3js connection.\n * @param stakePoolAddress: The public key (address) of the stake pool account.\n */\nexport async function getStakePoolAccount(\n  connection: Connection,\n  stakePoolAddress: PublicKey,\n): Promise<StakePoolAccount> {\n  const account = await connection.getAccountInfo(stakePoolAddress);\n\n  if (!account) {\n    throw new Error('Invalid stake pool account');\n  }\n\n  return {\n    pubkey: stakePoolAddress,\n    account: {\n      data: StakePoolLayout.decode(account.data),\n      executable: account.executable,\n      lamports: account.lamports,\n      owner: account.owner,\n    },\n  };\n}\n\n/**\n * Retrieves and deserializes a Stake account using a web3js connection and the stake address.\n * @param connection: An active web3js connection.\n * @param stakeAccount: The public key (address) of the stake account.\n */\nexport async function getStakeAccount(\n  connection: Connection,\n  stakeAccount: PublicKey,\n): Promise<StakeAccount> {\n  const result = (await connection.getParsedAccountInfo(stakeAccount)).value;\n  if (!result || !('parsed' in result.data)) {\n    throw new Error('Invalid stake account');\n  }\n  const program = result.data.program;\n  if (program != 'stake') {\n    throw new Error('Not a stake account');\n  }\n  return create(result.data.parsed, StakeAccount);\n}\n\n/**\n * Retrieves all StakePool and ValidatorList accounts that are running a particular StakePool program.\n * @param connection: An active web3js connection.\n * @param stakePoolProgramAddress: The public key (address) of the StakePool program.\n */\nexport async function getStakePoolAccounts(\n  connection: Connection,\n  stakePoolProgramAddress: PublicKey,\n): Promise<(StakePoolAccount | ValidatorListAccount)[] | undefined> {\n  const response = await connection.getProgramAccounts(stakePoolProgramAddress);\n\n  return response.value.map((a) => {\n    let decodedData;\n\n    if (a.account.data.readUInt8() === 1) {\n      try {\n        decodedData = StakePoolLayout.decode(a.account.data);\n      } catch (error) {\n        console.log('Could not decode StakeAccount. Error:', error);\n        decodedData = undefined;\n      }\n    } else if (a.account.data.readUInt8() === 2) {\n      try {\n        decodedData = ValidatorListLayout.decode(a.account.data);\n      } catch (error) {\n        console.log('Could not decode ValidatorList. Error:', error);\n        decodedData = undefined;\n      }\n    } else {\n      console.error(\n        `Could not decode. StakePoolAccount Enum is ${a.account.data.readUInt8()}, expected 1 or 2!`,\n      );\n      decodedData = undefined;\n    }\n\n    return {\n      pubkey: a.pubkey,\n      account: {\n        data: decodedData,\n        executable: a.account.executable,\n        lamports: a.account.lamports,\n        owner: a.account.owner,\n      },\n    };\n  });\n}\n\n/**\n * Creates instructions required to deposit stake to stake pool.\n */\nexport async function depositStake(\n  connection: Connection,\n  stakePoolAddress: PublicKey,\n  authorizedPubkey: PublicKey,\n  validatorVote: PublicKey,\n  depositStake: PublicKey,\n  poolTokenReceiverAccount?: PublicKey,\n) {\n  const stakePool = await getStakePoolAccount(connection, stakePoolAddress);\n\n  const withdrawAuthority = findWithdrawAuthorityProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    stakePoolAddress,\n  );\n\n  const validatorStake = findStakeProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    validatorVote,\n    stakePoolAddress,\n  );\n\n  const instructions: TransactionInstruction[] = [];\n  const signers: Signer[] = [];\n\n  const poolMint = stakePool.account.data.poolMint;\n\n  // Create token account if not specified\n  if (!poolTokenReceiverAccount) {\n    const associatedAddress = getAssociatedTokenAddressSync(poolMint, authorizedPubkey);\n    instructions.push(\n      createAssociatedTokenAccountIdempotentInstruction(\n        authorizedPubkey,\n        associatedAddress,\n        authorizedPubkey,\n        poolMint,\n      ),\n    );\n    poolTokenReceiverAccount = associatedAddress;\n  }\n\n  instructions.push(\n    ...StakeProgram.authorize({\n      stakePubkey: depositStake,\n      authorizedPubkey,\n      newAuthorizedPubkey: stakePool.account.data.stakeDepositAuthority,\n      stakeAuthorizationType: StakeAuthorizationLayout.Staker,\n    }).instructions,\n  );\n\n  instructions.push(\n    ...StakeProgram.authorize({\n      stakePubkey: depositStake,\n      authorizedPubkey,\n      newAuthorizedPubkey: stakePool.account.data.stakeDepositAuthority,\n      stakeAuthorizationType: StakeAuthorizationLayout.Withdrawer,\n    }).instructions,\n  );\n\n  instructions.push(\n    StakePoolInstruction.depositStake({\n      stakePool: stakePoolAddress,\n      validatorList: stakePool.account.data.validatorList,\n      depositAuthority: stakePool.account.data.stakeDepositAuthority,\n      reserveStake: stakePool.account.data.reserveStake,\n      managerFeeAccount: stakePool.account.data.managerFeeAccount,\n      referralPoolAccount: poolTokenReceiverAccount,\n      destinationPoolAccount: poolTokenReceiverAccount,\n      withdrawAuthority,\n      depositStake,\n      validatorStake,\n      poolMint,\n    }),\n  );\n\n  return {\n    instructions,\n    signers,\n  };\n}\n\n/**\n * Creates instructions required to deposit sol to stake pool.\n */\nexport async function depositSol(\n  connection: Connection,\n  stakePoolAddress: PublicKey,\n  from: PublicKey,\n  lamports: number,\n  destinationTokenAccount?: PublicKey,\n  referrerTokenAccount?: PublicKey,\n  depositAuthority?: PublicKey,\n) {\n  const fromBalance = await connection.getBalance(from, 'confirmed');\n  if (fromBalance < lamports) {\n    throw new Error(\n      `Not enough SOL to deposit into pool. Maximum deposit amount is ${lamportsToSol(\n        fromBalance,\n      )} SOL.`,\n    );\n  }\n\n  const stakePoolAccount = await getStakePoolAccount(connection, stakePoolAddress);\n  const stakePool = stakePoolAccount.account.data;\n\n  // Ephemeral SOL account just to do the transfer\n  const userSolTransfer = new Keypair();\n  const signers: Signer[] = [userSolTransfer];\n  const instructions: TransactionInstruction[] = [];\n\n  // Create the ephemeral SOL account\n  instructions.push(\n    SystemProgram.transfer({\n      fromPubkey: from,\n      toPubkey: userSolTransfer.publicKey,\n      lamports,\n    }),\n  );\n\n  // Create token account if not specified\n  if (!destinationTokenAccount) {\n    const associatedAddress = getAssociatedTokenAddressSync(stakePool.poolMint, from);\n    instructions.push(\n      createAssociatedTokenAccountIdempotentInstruction(\n        from,\n        associatedAddress,\n        from,\n        stakePool.poolMint,\n      ),\n    );\n    destinationTokenAccount = associatedAddress;\n  }\n\n  const withdrawAuthority = findWithdrawAuthorityProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    stakePoolAddress,\n  );\n\n  instructions.push(\n    StakePoolInstruction.depositSol({\n      stakePool: stakePoolAddress,\n      reserveStake: stakePool.reserveStake,\n      fundingAccount: userSolTransfer.publicKey,\n      destinationPoolAccount: destinationTokenAccount,\n      managerFeeAccount: stakePool.managerFeeAccount,\n      referralPoolAccount: referrerTokenAccount ?? destinationTokenAccount,\n      poolMint: stakePool.poolMint,\n      lamports,\n      withdrawAuthority,\n      depositAuthority,\n    }),\n  );\n\n  return {\n    instructions,\n    signers,\n  };\n}\n\n/**\n * Creates instructions required to withdraw stake from a stake pool.\n */\nexport async function withdrawStake(\n  connection: Connection,\n  stakePoolAddress: PublicKey,\n  tokenOwner: PublicKey,\n  amount: number,\n  useReserve = false,\n  voteAccountAddress?: PublicKey,\n  stakeReceiver?: PublicKey,\n  poolTokenAccount?: PublicKey,\n  validatorComparator?: (_a: ValidatorAccount, _b: ValidatorAccount) => number,\n) {\n  const stakePool = await getStakePoolAccount(connection, stakePoolAddress);\n  const poolAmount = solToLamports(amount);\n\n  if (!poolTokenAccount) {\n    poolTokenAccount = getAssociatedTokenAddressSync(stakePool.account.data.poolMint, tokenOwner);\n  }\n\n  const tokenAccount = await getAccount(connection, poolTokenAccount);\n\n  // Check withdrawFrom balance\n  if (tokenAccount.amount < poolAmount) {\n    throw new Error(\n      `Not enough token balance to withdraw ${lamportsToSol(poolAmount)} pool tokens.\n        Maximum withdraw amount is ${lamportsToSol(tokenAccount.amount)} pool tokens.`,\n    );\n  }\n\n  const stakeAccountRentExemption = await connection.getMinimumBalanceForRentExemption(\n    StakeProgram.space,\n  );\n\n  const withdrawAuthority = findWithdrawAuthorityProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    stakePoolAddress,\n  );\n\n  let stakeReceiverAccount = null;\n  if (stakeReceiver) {\n    stakeReceiverAccount = await getStakeAccount(connection, stakeReceiver);\n  }\n\n  const withdrawAccounts: WithdrawAccount[] = [];\n\n  if (useReserve) {\n    withdrawAccounts.push({\n      stakeAddress: stakePool.account.data.reserveStake,\n      voteAddress: undefined,\n      poolAmount,\n    });\n  } else if (stakeReceiverAccount && stakeReceiverAccount?.type == 'delegated') {\n    const voteAccount = stakeReceiverAccount.info?.stake?.delegation.voter;\n    if (!voteAccount) throw new Error(`Invalid stake reciever ${stakeReceiver} delegation`);\n    const validatorListAccount = await connection.getAccountInfo(\n      stakePool.account.data.validatorList,\n    );\n    const validatorList = ValidatorListLayout.decode(validatorListAccount?.data) as ValidatorList;\n    const isValidVoter = validatorList.validators.find((val) =>\n      val.voteAccountAddress.equals(voteAccount),\n    );\n    if (voteAccountAddress && voteAccountAddress !== voteAccount) {\n      throw new Error(`Provided withdrawal vote account ${voteAccountAddress} does not match delegation on stake receiver account ${voteAccount},\n      remove this flag or provide a different stake account delegated to ${voteAccountAddress}`);\n    }\n    if (isValidVoter) {\n      const stakeAccountAddress = findStakeProgramAddress(\n        STAKE_POOL_PROGRAM_ID,\n        voteAccount,\n        stakePoolAddress,\n      );\n\n      const stakeAccount = await connection.getAccountInfo(stakeAccountAddress);\n      if (!stakeAccount) {\n        throw new Error(`Preferred withdraw valdator's stake account is invalid`);\n      }\n\n      const availableForWithdrawal = calcLamportsWithdrawAmount(\n        stakePool.account.data,\n        stakeAccount.lamports - MINIMUM_ACTIVE_STAKE - stakeAccountRentExemption,\n      );\n\n      if (availableForWithdrawal < poolAmount) {\n        throw new Error(\n          `Not enough lamports available for withdrawal from ${stakeAccountAddress},\n            ${poolAmount} asked, ${availableForWithdrawal} available.`,\n        );\n      }\n      withdrawAccounts.push({\n        stakeAddress: stakeAccountAddress,\n        voteAddress: voteAccount,\n        poolAmount,\n      });\n    } else {\n      throw new Error(\n        `Provided stake account is delegated to a vote account ${voteAccount} which does not exist in the stake pool`,\n      );\n    }\n  } else if (voteAccountAddress) {\n    const stakeAccountAddress = findStakeProgramAddress(\n      STAKE_POOL_PROGRAM_ID,\n      voteAccountAddress,\n      stakePoolAddress,\n    );\n    const stakeAccount = await connection.getAccountInfo(stakeAccountAddress);\n    if (!stakeAccount) {\n      throw new Error('Invalid Stake Account');\n    }\n\n    const availableForWithdrawal = calcLamportsWithdrawAmount(\n      stakePool.account.data,\n      stakeAccount.lamports - MINIMUM_ACTIVE_STAKE - stakeAccountRentExemption,\n    );\n\n    if (availableForWithdrawal < poolAmount) {\n      // noinspection ExceptionCaughtLocallyJS\n      throw new Error(\n        `Not enough lamports available for withdrawal from ${stakeAccountAddress},\n          ${poolAmount} asked, ${availableForWithdrawal} available.`,\n      );\n    }\n    withdrawAccounts.push({\n      stakeAddress: stakeAccountAddress,\n      voteAddress: voteAccountAddress,\n      poolAmount,\n    });\n  } else {\n    // Get the list of accounts to withdraw from\n    withdrawAccounts.push(\n      ...(await prepareWithdrawAccounts(\n        connection,\n        stakePool.account.data,\n        stakePoolAddress,\n        poolAmount,\n        validatorComparator,\n        poolTokenAccount.equals(stakePool.account.data.managerFeeAccount),\n      )),\n    );\n  }\n\n  // Construct transaction to withdraw from withdrawAccounts account list\n  const instructions: TransactionInstruction[] = [];\n  const userTransferAuthority = Keypair.generate();\n\n  const signers: Signer[] = [userTransferAuthority];\n\n  instructions.push(\n    createApproveInstruction(\n      poolTokenAccount,\n      userTransferAuthority.publicKey,\n      tokenOwner,\n      poolAmount,\n    ),\n  );\n\n  let totalRentFreeBalances = 0;\n\n  // Max 5 accounts to prevent an error: \"Transaction too large\"\n  const maxWithdrawAccounts = 5;\n  let i = 0;\n\n  // Go through prepared accounts and withdraw/claim them\n  for (const withdrawAccount of withdrawAccounts) {\n    if (i > maxWithdrawAccounts) {\n      break;\n    }\n    // Convert pool tokens amount to lamports\n    const solWithdrawAmount = Math.ceil(\n      calcLamportsWithdrawAmount(stakePool.account.data, withdrawAccount.poolAmount),\n    );\n\n    let infoMsg = `Withdrawing â—Ž${solWithdrawAmount},\n      from stake account ${withdrawAccount.stakeAddress?.toBase58()}`;\n\n    if (withdrawAccount.voteAddress) {\n      infoMsg = `${infoMsg}, delegated to ${withdrawAccount.voteAddress?.toBase58()}`;\n    }\n\n    console.info(infoMsg);\n    let stakeToReceive;\n\n    if (!stakeReceiver || (stakeReceiverAccount && stakeReceiverAccount.type === 'delegated')) {\n      const stakeKeypair = newStakeAccount(tokenOwner, instructions, stakeAccountRentExemption);\n      signers.push(stakeKeypair);\n      totalRentFreeBalances += stakeAccountRentExemption;\n      stakeToReceive = stakeKeypair.publicKey;\n    } else {\n      stakeToReceive = stakeReceiver;\n    }\n\n    instructions.push(\n      StakePoolInstruction.withdrawStake({\n        stakePool: stakePoolAddress,\n        validatorList: stakePool.account.data.validatorList,\n        validatorStake: withdrawAccount.stakeAddress,\n        destinationStake: stakeToReceive,\n        destinationStakeAuthority: tokenOwner,\n        sourceTransferAuthority: userTransferAuthority.publicKey,\n        sourcePoolAccount: poolTokenAccount,\n        managerFeeAccount: stakePool.account.data.managerFeeAccount,\n        poolMint: stakePool.account.data.poolMint,\n        poolTokens: withdrawAccount.poolAmount,\n        withdrawAuthority,\n      }),\n    );\n    i++;\n  }\n  if (stakeReceiver && stakeReceiverAccount && stakeReceiverAccount.type === 'delegated') {\n    signers.forEach((newStakeKeypair) => {\n      instructions.concat(\n        StakeProgram.merge({\n          stakePubkey: stakeReceiver,\n          sourceStakePubKey: newStakeKeypair.publicKey,\n          authorizedPubkey: tokenOwner,\n        }).instructions,\n      );\n    });\n  }\n\n  return {\n    instructions,\n    signers,\n    stakeReceiver,\n    totalRentFreeBalances,\n  };\n}\n\n/**\n * Creates instructions required to withdraw SOL directly from a stake pool.\n */\nexport async function withdrawSol(\n  connection: Connection,\n  stakePoolAddress: PublicKey,\n  tokenOwner: PublicKey,\n  solReceiver: PublicKey,\n  amount: number,\n  solWithdrawAuthority?: PublicKey,\n) {\n  const stakePool = await getStakePoolAccount(connection, stakePoolAddress);\n  const poolAmount = solToLamports(amount);\n\n  const poolTokenAccount = getAssociatedTokenAddressSync(\n    stakePool.account.data.poolMint,\n    tokenOwner,\n  );\n\n  const tokenAccount = await getAccount(connection, poolTokenAccount);\n\n  // Check withdrawFrom balance\n  if (tokenAccount.amount < poolAmount) {\n    throw new Error(\n      `Not enough token balance to withdraw ${lamportsToSol(poolAmount)} pool tokens.\n          Maximum withdraw amount is ${lamportsToSol(tokenAccount.amount)} pool tokens.`,\n    );\n  }\n\n  // Construct transaction to withdraw from withdrawAccounts account list\n  const instructions: TransactionInstruction[] = [];\n  const userTransferAuthority = Keypair.generate();\n  const signers: Signer[] = [userTransferAuthority];\n\n  instructions.push(\n    createApproveInstruction(\n      poolTokenAccount,\n      userTransferAuthority.publicKey,\n      tokenOwner,\n      poolAmount,\n    ),\n  );\n\n  const poolWithdrawAuthority = findWithdrawAuthorityProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    stakePoolAddress,\n  );\n\n  if (solWithdrawAuthority) {\n    const expectedSolWithdrawAuthority = stakePool.account.data.solWithdrawAuthority;\n    if (!expectedSolWithdrawAuthority) {\n      throw new Error('SOL withdraw authority specified in arguments but stake pool has none');\n    }\n    if (solWithdrawAuthority.toBase58() != expectedSolWithdrawAuthority.toBase58()) {\n      throw new Error(\n        `Invalid deposit withdraw specified, expected ${expectedSolWithdrawAuthority.toBase58()}, received ${solWithdrawAuthority.toBase58()}`,\n      );\n    }\n  }\n\n  const withdrawTransaction = StakePoolInstruction.withdrawSol({\n    stakePool: stakePoolAddress,\n    withdrawAuthority: poolWithdrawAuthority,\n    reserveStake: stakePool.account.data.reserveStake,\n    sourcePoolAccount: poolTokenAccount,\n    sourceTransferAuthority: userTransferAuthority.publicKey,\n    destinationSystemAccount: solReceiver,\n    managerFeeAccount: stakePool.account.data.managerFeeAccount,\n    poolMint: stakePool.account.data.poolMint,\n    poolTokens: poolAmount,\n    solWithdrawAuthority,\n  });\n\n  instructions.push(withdrawTransaction);\n\n  return {\n    instructions,\n    signers,\n  };\n}\n\n/**\n * Creates instructions required to increase validator stake.\n */\nexport async function increaseValidatorStake(\n  connection: Connection,\n  stakePoolAddress: PublicKey,\n  validatorVote: PublicKey,\n  lamports: number,\n  ephemeralStakeSeed?: number,\n) {\n  const stakePool = await getStakePoolAccount(connection, stakePoolAddress);\n\n  const validatorList = await getValidatorListAccount(\n    connection,\n    stakePool.account.data.validatorList,\n  );\n\n  const validatorInfo = validatorList.account.data.validators.find(\n    (v) => v.voteAccountAddress.toBase58() == validatorVote.toBase58(),\n  );\n\n  if (!validatorInfo) {\n    throw new Error('Vote account not found in validator list');\n  }\n\n  const withdrawAuthority = findWithdrawAuthorityProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    stakePoolAddress,\n  );\n\n  const transientStakeSeed = validatorInfo.transientSeedSuffixStart.addn(1); // bump up by one to avoid reuse\n\n  const transientStake = findTransientStakeProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    validatorInfo.voteAccountAddress,\n    stakePoolAddress,\n    transientStakeSeed,\n  );\n\n  const validatorStake = findStakeProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    validatorInfo.voteAccountAddress,\n    stakePoolAddress,\n  );\n\n  const instructions: TransactionInstruction[] = [];\n\n  if (ephemeralStakeSeed != undefined) {\n    const ephemeralStake = findEphemeralStakeProgramAddress(\n      STAKE_POOL_PROGRAM_ID,\n      stakePoolAddress,\n      new BN(ephemeralStakeSeed),\n    );\n    StakePoolInstruction.increaseAdditionalValidatorStake({\n      stakePool: stakePoolAddress,\n      staker: stakePool.account.data.staker,\n      validatorList: stakePool.account.data.validatorList,\n      reserveStake: stakePool.account.data.reserveStake,\n      transientStakeSeed: transientStakeSeed.toNumber(),\n      withdrawAuthority,\n      transientStake,\n      validatorStake,\n      validatorVote,\n      lamports,\n      ephemeralStake,\n      ephemeralStakeSeed,\n    });\n  } else {\n    instructions.push(\n      StakePoolInstruction.increaseValidatorStake({\n        stakePool: stakePoolAddress,\n        staker: stakePool.account.data.staker,\n        validatorList: stakePool.account.data.validatorList,\n        reserveStake: stakePool.account.data.reserveStake,\n        transientStakeSeed: transientStakeSeed.toNumber(),\n        withdrawAuthority,\n        transientStake,\n        validatorStake,\n        validatorVote,\n        lamports,\n      }),\n    );\n  }\n\n  return {\n    instructions,\n  };\n}\n\n/**\n * Creates instructions required to decrease validator stake.\n */\nexport async function decreaseValidatorStake(\n  connection: Connection,\n  stakePoolAddress: PublicKey,\n  validatorVote: PublicKey,\n  lamports: number,\n  ephemeralStakeSeed?: number,\n) {\n  const stakePool = await getStakePoolAccount(connection, stakePoolAddress);\n  const validatorList = await getValidatorListAccount(\n    connection,\n    stakePool.account.data.validatorList,\n  );\n\n  const validatorInfo = validatorList.account.data.validators.find(\n    (v) => v.voteAccountAddress.toBase58() == validatorVote.toBase58(),\n  );\n\n  if (!validatorInfo) {\n    throw new Error('Vote account not found in validator list');\n  }\n\n  const withdrawAuthority = findWithdrawAuthorityProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    stakePoolAddress,\n  );\n\n  const validatorStake = findStakeProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    validatorInfo.voteAccountAddress,\n    stakePoolAddress,\n  );\n\n  const transientStakeSeed = validatorInfo.transientSeedSuffixStart.addn(1); // bump up by one to avoid reuse\n\n  const transientStake = findTransientStakeProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    validatorInfo.voteAccountAddress,\n    stakePoolAddress,\n    transientStakeSeed,\n  );\n\n  const instructions: TransactionInstruction[] = [];\n\n  if (ephemeralStakeSeed != undefined) {\n    const ephemeralStake = findEphemeralStakeProgramAddress(\n      STAKE_POOL_PROGRAM_ID,\n      stakePoolAddress,\n      new BN(ephemeralStakeSeed),\n    );\n    instructions.push(\n      StakePoolInstruction.decreaseAdditionalValidatorStake({\n        stakePool: stakePoolAddress,\n        staker: stakePool.account.data.staker,\n        validatorList: stakePool.account.data.validatorList,\n        transientStakeSeed: transientStakeSeed.toNumber(),\n        withdrawAuthority,\n        validatorStake,\n        transientStake,\n        lamports,\n        ephemeralStake,\n        ephemeralStakeSeed,\n      }),\n    );\n  } else {\n    instructions.push(\n      StakePoolInstruction.decreaseValidatorStake({\n        stakePool: stakePoolAddress,\n        staker: stakePool.account.data.staker,\n        validatorList: stakePool.account.data.validatorList,\n        transientStakeSeed: transientStakeSeed.toNumber(),\n        withdrawAuthority,\n        validatorStake,\n        transientStake,\n        lamports,\n      }),\n    );\n  }\n\n  return {\n    instructions,\n  };\n}\n\n/**\n * Creates instructions required to completely update a stake pool after epoch change.\n */\nexport async function updateStakePool(\n  connection: Connection,\n  stakePool: StakePoolAccount,\n  noMerge = false,\n) {\n  const stakePoolAddress = stakePool.pubkey;\n\n  const validatorList = await getValidatorListAccount(\n    connection,\n    stakePool.account.data.validatorList,\n  );\n\n  const withdrawAuthority = findWithdrawAuthorityProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    stakePoolAddress,\n  );\n\n  const updateListInstructions: TransactionInstruction[] = [];\n  const instructions: TransactionInstruction[] = [];\n\n  let startIndex = 0;\n  const validatorChunks: Array<ValidatorStakeInfo[]> = arrayChunk(\n    validatorList.account.data.validators,\n    MAX_VALIDATORS_TO_UPDATE,\n  );\n\n  for (const validatorChunk of validatorChunks) {\n    const validatorAndTransientStakePairs: PublicKey[] = [];\n\n    for (const validator of validatorChunk) {\n      const validatorStake = findStakeProgramAddress(\n        STAKE_POOL_PROGRAM_ID,\n        validator.voteAccountAddress,\n        stakePoolAddress,\n      );\n      validatorAndTransientStakePairs.push(validatorStake);\n\n      const transientStake = findTransientStakeProgramAddress(\n        STAKE_POOL_PROGRAM_ID,\n        validator.voteAccountAddress,\n        stakePoolAddress,\n        validator.transientSeedSuffixStart,\n      );\n      validatorAndTransientStakePairs.push(transientStake);\n    }\n\n    updateListInstructions.push(\n      StakePoolInstruction.updateValidatorListBalance({\n        stakePool: stakePoolAddress,\n        validatorList: stakePool.account.data.validatorList,\n        reserveStake: stakePool.account.data.reserveStake,\n        validatorAndTransientStakePairs,\n        withdrawAuthority,\n        startIndex,\n        noMerge,\n      }),\n    );\n    startIndex += MAX_VALIDATORS_TO_UPDATE;\n  }\n\n  instructions.push(\n    StakePoolInstruction.updateStakePoolBalance({\n      stakePool: stakePoolAddress,\n      validatorList: stakePool.account.data.validatorList,\n      reserveStake: stakePool.account.data.reserveStake,\n      managerFeeAccount: stakePool.account.data.managerFeeAccount,\n      poolMint: stakePool.account.data.poolMint,\n      withdrawAuthority,\n    }),\n  );\n\n  instructions.push(\n    StakePoolInstruction.cleanupRemovedValidatorEntries({\n      stakePool: stakePoolAddress,\n      validatorList: stakePool.account.data.validatorList,\n    }),\n  );\n\n  return {\n    updateListInstructions,\n    finalInstructions: instructions,\n  };\n}\n\n/**\n * Retrieves detailed information about the StakePool.\n */\nexport async function stakePoolInfo(connection: Connection, stakePoolAddress: PublicKey) {\n  const stakePool = await getStakePoolAccount(connection, stakePoolAddress);\n  const reserveAccountStakeAddress = stakePool.account.data.reserveStake;\n  const totalLamports = stakePool.account.data.totalLamports;\n  const lastUpdateEpoch = stakePool.account.data.lastUpdateEpoch;\n\n  const validatorList = await getValidatorListAccount(\n    connection,\n    stakePool.account.data.validatorList,\n  );\n\n  const maxNumberOfValidators = validatorList.account.data.maxValidators;\n  const currentNumberOfValidators = validatorList.account.data.validators.length;\n\n  const epochInfo = await connection.getEpochInfo();\n  const reserveStake = await connection.getAccountInfo(reserveAccountStakeAddress);\n  const withdrawAuthority = findWithdrawAuthorityProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    stakePoolAddress,\n  );\n\n  const minimumReserveStakeBalance =\n    (await connection.getMinimumBalanceForRentExemption(StakeProgram.space)) + 1;\n\n  const stakeAccounts = await Promise.all(\n    validatorList.account.data.validators.map(async (validator) => {\n      const stakeAccountAddress = findStakeProgramAddress(\n        STAKE_POOL_PROGRAM_ID,\n        validator.voteAccountAddress,\n        stakePoolAddress,\n      );\n      const transientStakeAccountAddress = findTransientStakeProgramAddress(\n        STAKE_POOL_PROGRAM_ID,\n        validator.voteAccountAddress,\n        stakePoolAddress,\n        validator.transientSeedSuffixStart,\n      );\n      const updateRequired = !validator.lastUpdateEpoch.eqn(epochInfo.epoch);\n      return {\n        voteAccountAddress: validator.voteAccountAddress.toBase58(),\n        stakeAccountAddress: stakeAccountAddress.toBase58(),\n        validatorActiveStakeLamports: validator.activeStakeLamports.toString(),\n        validatorLastUpdateEpoch: validator.lastUpdateEpoch.toString(),\n        validatorLamports: validator.activeStakeLamports\n          .add(validator.transientStakeLamports)\n          .toString(),\n        validatorTransientStakeAccountAddress: transientStakeAccountAddress.toBase58(),\n        validatorTransientStakeLamports: validator.transientStakeLamports.toString(),\n        updateRequired,\n      };\n    }),\n  );\n\n  const totalPoolTokens = lamportsToSol(stakePool.account.data.poolTokenSupply);\n  const updateRequired = !lastUpdateEpoch.eqn(epochInfo.epoch);\n\n  return {\n    address: stakePoolAddress.toBase58(),\n    poolWithdrawAuthority: withdrawAuthority.toBase58(),\n    manager: stakePool.account.data.manager.toBase58(),\n    staker: stakePool.account.data.staker.toBase58(),\n    stakeDepositAuthority: stakePool.account.data.stakeDepositAuthority.toBase58(),\n    stakeWithdrawBumpSeed: stakePool.account.data.stakeWithdrawBumpSeed,\n    maxValidators: maxNumberOfValidators,\n    validatorList: validatorList.account.data.validators.map((validator) => {\n      return {\n        activeStakeLamports: validator.activeStakeLamports.toString(),\n        transientStakeLamports: validator.transientStakeLamports.toString(),\n        lastUpdateEpoch: validator.lastUpdateEpoch.toString(),\n        transientSeedSuffixStart: validator.transientSeedSuffixStart.toString(),\n        transientSeedSuffixEnd: validator.transientSeedSuffixEnd.toString(),\n        status: validator.status.toString(),\n        voteAccountAddress: validator.voteAccountAddress.toString(),\n      };\n    }), // CliStakePoolValidator\n    validatorListStorageAccount: stakePool.account.data.validatorList.toBase58(),\n    reserveStake: stakePool.account.data.reserveStake.toBase58(),\n    poolMint: stakePool.account.data.poolMint.toBase58(),\n    managerFeeAccount: stakePool.account.data.managerFeeAccount.toBase58(),\n    tokenProgramId: stakePool.account.data.tokenProgramId.toBase58(),\n    totalLamports: stakePool.account.data.totalLamports.toString(),\n    poolTokenSupply: stakePool.account.data.poolTokenSupply.toString(),\n    lastUpdateEpoch: stakePool.account.data.lastUpdateEpoch.toString(),\n    lockup: stakePool.account.data.lockup, // pub lockup: CliStakePoolLockup\n    epochFee: stakePool.account.data.epochFee,\n    nextEpochFee: stakePool.account.data.nextEpochFee,\n    preferredDepositValidatorVoteAddress:\n      stakePool.account.data.preferredDepositValidatorVoteAddress,\n    preferredWithdrawValidatorVoteAddress:\n      stakePool.account.data.preferredWithdrawValidatorVoteAddress,\n    stakeDepositFee: stakePool.account.data.stakeDepositFee,\n    stakeWithdrawalFee: stakePool.account.data.stakeWithdrawalFee,\n    // CliStakePool the same\n    nextStakeWithdrawalFee: stakePool.account.data.nextStakeWithdrawalFee,\n    stakeReferralFee: stakePool.account.data.stakeReferralFee,\n    solDepositAuthority: stakePool.account.data.solDepositAuthority?.toBase58(),\n    solDepositFee: stakePool.account.data.solDepositFee,\n    solReferralFee: stakePool.account.data.solReferralFee,\n    solWithdrawAuthority: stakePool.account.data.solWithdrawAuthority?.toBase58(),\n    solWithdrawalFee: stakePool.account.data.solWithdrawalFee,\n    nextSolWithdrawalFee: stakePool.account.data.nextSolWithdrawalFee,\n    lastEpochPoolTokenSupply: stakePool.account.data.lastEpochPoolTokenSupply.toString(),\n    lastEpochTotalLamports: stakePool.account.data.lastEpochTotalLamports.toString(),\n    details: {\n      reserveStakeLamports: reserveStake?.lamports,\n      reserveAccountStakeAddress: reserveAccountStakeAddress.toBase58(),\n      minimumReserveStakeBalance,\n      stakeAccounts,\n      totalLamports,\n      totalPoolTokens,\n      currentNumberOfValidators,\n      maxNumberOfValidators,\n      updateRequired,\n    }, // CliStakePoolDetails\n  };\n}\n\n/**\n * Creates instructions required to redelegate stake.\n */\nexport async function redelegate(props: RedelegateProps) {\n  const {\n    connection,\n    stakePoolAddress,\n    sourceVoteAccount,\n    sourceTransientStakeSeed,\n    destinationVoteAccount,\n    destinationTransientStakeSeed,\n    ephemeralStakeSeed,\n    lamports,\n  } = props;\n  const stakePool = await getStakePoolAccount(connection, stakePoolAddress);\n\n  const stakePoolWithdrawAuthority = findWithdrawAuthorityProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    stakePoolAddress,\n  );\n\n  const sourceValidatorStake = findStakeProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    sourceVoteAccount,\n    stakePoolAddress,\n  );\n\n  const sourceTransientStake = findTransientStakeProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    sourceVoteAccount,\n    stakePoolAddress,\n    new BN(sourceTransientStakeSeed),\n  );\n\n  const destinationValidatorStake = findStakeProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    destinationVoteAccount,\n    stakePoolAddress,\n  );\n\n  const destinationTransientStake = findTransientStakeProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    destinationVoteAccount,\n    stakePoolAddress,\n    new BN(destinationTransientStakeSeed),\n  );\n\n  const ephemeralStake = findEphemeralStakeProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    stakePoolAddress,\n    new BN(ephemeralStakeSeed),\n  );\n\n  const instructions: TransactionInstruction[] = [];\n\n  instructions.push(\n    StakePoolInstruction.redelegate({\n      stakePool: stakePool.pubkey,\n      staker: stakePool.account.data.staker,\n      validatorList: stakePool.account.data.validatorList,\n      stakePoolWithdrawAuthority,\n      ephemeralStake,\n      ephemeralStakeSeed,\n      sourceValidatorStake,\n      sourceTransientStake,\n      sourceTransientStakeSeed,\n      destinationValidatorStake,\n      destinationTransientStake,\n      destinationTransientStakeSeed,\n      validator: destinationVoteAccount,\n      lamports,\n    }),\n  );\n\n  return {\n    instructions,\n  };\n}\n\n/**\n * Initializes a new StakePool.\n */\nexport async function initialize(props: InitializeProps) {\n  const {\n    connection,\n    stakePool,\n    poolMint,\n    validatorList,\n    manager,\n    reserveStake,\n    managerPoolAccount,\n    fee,\n    referralFee,\n  } = props;\n\n  const poolBalance = await connection.getMinimumBalanceForRentExemption(StakePoolLayout.span);\n\n  const instructions: TransactionInstruction[] = [];\n  const signers: Signer[] = [manager, stakePool, validatorList];\n\n  instructions.push(\n    SystemProgram.createAccount({\n      fromPubkey: manager.publicKey,\n      newAccountPubkey: stakePool.publicKey,\n      lamports: poolBalance,\n      space: StakePoolLayout.span,\n      programId: STAKE_POOL_PROGRAM_ID,\n    }),\n  );\n\n  // current supported max by the program, go big!\n  const maxValidators = 2950;\n\n  const validatorListBalance = await connection.getMinimumBalanceForRentExemption(\n    ValidatorListLayout.span + ValidatorStakeInfoLayout.span * maxValidators,\n  );\n\n  instructions.push(\n    SystemProgram.createAccount({\n      fromPubkey: manager.publicKey,\n      newAccountPubkey: validatorList.publicKey,\n      lamports: validatorListBalance,\n      space: ValidatorListLayout.span,\n      programId: STAKE_POOL_PROGRAM_ID,\n    }),\n  );\n\n  const withdrawAuthority = findWithdrawAuthorityProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    stakePool.publicKey,\n  );\n\n  instructions.push(\n    StakePoolInstruction.initialize({\n      stakePool: stakePool.publicKey,\n      manager: manager.publicKey,\n      staker: manager.publicKey,\n      stakePoolWithdrawAuthority: withdrawAuthority,\n      validatorList: validatorList.publicKey,\n      poolMint,\n      managerPoolAccount,\n      reserveStake,\n      fee,\n      withdrawalFee: fee,\n      depositFee: fee,\n      referralFee,\n      maxValidators,\n    }),\n  );\n\n  return {\n    instructions,\n    signers,\n  };\n}\n\n/**\n * Creates instructions required to create pool token metadata.\n */\nexport async function createPoolTokenMetadata(props: CreateStakePoolTokenMetadataProps) {\n  const { connection, name, symbol, uri, payer } = props;\n\n  const stakePool =\n    props.stakePool instanceof PublicKey\n      ? await getStakePoolAccount(connection, props.stakePool)\n      : props.stakePool;\n\n  const tokenMetadata =\n    props.tokenMetadata ?? findTokenMetadataAddress(stakePool.account.data.poolMint);\n\n  const withdrawAuthority = findWithdrawAuthorityProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    stakePool.pubkey,\n  );\n\n  const manager = stakePool.account.data.manager;\n\n  const instructions: TransactionInstruction[] = [];\n  instructions.push(\n    StakePoolInstruction.createTokenMetadata({\n      stakePool: stakePool.pubkey,\n      poolMint: stakePool.account.data.poolMint,\n      payer,\n      manager,\n      tokenMetadata,\n      withdrawAuthority,\n      name,\n      symbol,\n      uri,\n    }),\n  );\n\n  return {\n    instructions,\n  };\n}\n\n/**\n * Creates instructions required to update pool token metadata.\n */\nexport async function updatePoolTokenMetadata(props: UpdateStakePoolTokenMetadataProps) {\n  const { connection, name, symbol, uri } = props;\n\n  const stakePool =\n    props.stakePool instanceof PublicKey\n      ? await getStakePoolAccount(connection, props.stakePool)\n      : props.stakePool;\n\n  const tokenMetadata =\n    props.tokenMetadata ?? findTokenMetadataAddress(stakePool.account.data.poolMint);\n\n  const withdrawAuthority = findWithdrawAuthorityProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    stakePool.pubkey,\n  );\n\n  const instructions: TransactionInstruction[] = [];\n  instructions.push(\n    StakePoolInstruction.updateTokenMetadata({\n      stakePool: stakePool.pubkey,\n      manager: stakePool.account.data.manager,\n      tokenMetadata,\n      withdrawAuthority,\n      name,\n      symbol,\n      uri,\n    }),\n  );\n\n  return {\n    instructions,\n  };\n}\n\n/**\n * Creates instructions required to add a validator to the pool.\n */\nexport async function addValidatorToPool(\n  connection: Connection,\n  stakePoolAddress: PublicKey,\n  validatorVote: PublicKey,\n  funder: PublicKey,\n  // seed?: number,\n) {\n  const stakePool = await getStakePoolAccount(connection, stakePoolAddress);\n\n  const validatorList = await getValidatorListAccount(\n    connection,\n    stakePool.account.data.validatorList,\n  );\n\n  const validatorInfo = validatorList.account.data.validators.find(\n    (v) => v.voteAccountAddress.toBase58() === validatorVote.toBase58(),\n  );\n\n  if (validatorInfo) {\n    throw new Error(\n      `Stake pool already contains validator ${validatorInfo.voteAccountAddress.toBase58()}, ignoring`,\n    );\n  }\n\n  const withdrawAuthority = findWithdrawAuthorityProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    stakePoolAddress,\n  );\n\n  const validatorStake = findStakeProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    validatorVote,\n    stakePoolAddress,\n  );\n\n  const instructions: TransactionInstruction[] = [];\n\n  instructions.push(\n    StakePoolInstruction.addValidatorToPool({\n      stakePool: stakePoolAddress,\n      staker: stakePool.account.data.staker,\n      funder,\n      // reserveStake: stakePool.account.data.reserveStake,\n      validatorList: stakePool.account.data.validatorList,\n      validatorStake,\n      withdrawAuthority,\n      validatorVote,\n      seed: undefined,\n    }),\n  );\n\n  return {\n    instructions,\n  };\n}\n\n/**\n * Creates instructions required to add a validator to the pool.\n */\nexport async function removeValidatorFromPool(\n  connection: Connection,\n  stakePoolAddress: PublicKey,\n  validatorVote: PublicKey,\n  staker: PublicKey,\n) {\n  const stakePool = await getStakePoolAccount(connection, stakePoolAddress);\n\n  const validatorList = await getValidatorListAccount(\n    connection,\n    stakePool.account.data.validatorList,\n  );\n\n  const validatorInfo = validatorList.account.data.validators.find(\n    (v) => v.voteAccountAddress.toBase58() === validatorVote.toBase58(),\n  );\n\n  if (!validatorInfo) {\n    throw new Error('Vote account not found in validator list');\n  }\n\n  const withdrawAuthority = findWithdrawAuthorityProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    stakePoolAddress,\n  );\n\n  const transientStake = findTransientStakeProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    validatorInfo.voteAccountAddress,\n    stakePoolAddress,\n    validatorInfo.transientSeedSuffixStart,\n  );\n\n  const validatorStake = findStakeProgramAddress(\n    STAKE_POOL_PROGRAM_ID,\n    validatorInfo.voteAccountAddress,\n    stakePoolAddress,\n  );\n\n  const destinationStake = Keypair.generate();\n\n  const signers: Signer[] = [destinationStake];\n  const instructions: TransactionInstruction[] = [];\n\n  instructions.push(\n    SystemProgram.createAccount({\n      fromPubkey: staker,\n      newAccountPubkey: destinationStake.publicKey,\n      lamports: 0,\n      space: StakeProgram.space,\n      programId: StakeProgram.programId,\n    }),\n  );\n\n  instructions.push(\n    StakePoolInstruction.removeValidatorFromPool({\n      stakePool: stakePoolAddress,\n      staker: stakePool.account.data.staker,\n      newStakeAuthority: staker,\n      withdrawAuthority,\n      validatorList: stakePool.account.data.validatorList,\n      validatorStake,\n      transientStake,\n      destinationStake: destinationStake.publicKey,\n    }),\n  );\n\n  return {\n    instructions,\n    signers,\n  };\n}\n"],"names":["LAMPORTS_PER_SOL","PublicKey","Buffer","u64","BN","struct","u8","publicKey","option","u32","vec","StakeProgram","Keypair","SystemProgram","BufferLayout","TOKEN_PROGRAM_ID","TransactionInstruction","SYSVAR_RENT_PUBKEY","SYSVAR_CLOCK_PUBKEY","SYSVAR_STAKE_HISTORY_PUBKEY","STAKE_CONFIG_ID","getAssociatedTokenAddressSync","createAssociatedTokenAccountIdempotentInstruction","StakeAuthorizationLayout","getAccount","createApproveInstruction"],"mappings":"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"}